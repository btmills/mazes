(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

var _slicedToArray = function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { var _arr = []; for (var _iterator = arr[Symbol.iterator](), _step; !(_step = _iterator.next()).done;) { _arr.push(_step.value); if (i && _arr.length === i) break; } return _arr; } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } };

(function () {
	var Maze = require("./maze");
	var random = require("./random");

	var maze;

	function generate() {
		var width = +document.getElementById("width").value;
		var height = +document.getElementById("height").value;

		var hash = "#" + width + "x" + height + "s" + random.seed;
		var href = window.location.href.split("#")[0] + hash;
		document.getElementById("permalink").setAttribute("href", href);

		maze = new Maze(width, height);
		maze.render(document.getElementById("canvas"));
	}

	document.getElementById("generate").addEventListener("click", function (event) {
		event.preventDefault();
		generate();
	});
	document.body.addEventListener("keyup", function (event) {
		var key = event.key || event.charCode || event.keyCode;
		var direction = ["west", "north", "east", "south"][key - 37];
		if (!direction) return;

		event.preventDefault();
		maze.move(direction);
	});

	var _dXDSDD$exec = /#(\d+)x(\d+)(?:s(\d+.\d+))?|.*/.exec(window.location.hash);

	var _dXDSDD$exec2 = _slicedToArray(_dXDSDD$exec, 4);

	var width = _dXDSDD$exec2[1];
	var height = _dXDSDD$exec2[2];
	var seed = _dXDSDD$exec2[3];
	if (width && height) {
		document.getElementById("width").value = width;
		document.getElementById("height").value = height;
	}
	if (seed) {
		random.seed = parseFloat(seed);
	}

	var canvas = document.getElementById("canvas");
	canvas.addEventListener("mousemove", function (event) {
		maze.hover(event.layerX, event.layerY);
	});

	generate();
})();

},{"./maze":3,"./random":4}],2:[function(require,module,exports){
"use strict";

var Grid = function ($el) {
	var SIZE = 20; // Width of square in pixels
	var WEIGHT = 2; // Width of line in pixels

	var ctx = $el.getContext("2d");

	function pixelHeight(val) {
		if (arguments.length > 0) {
			ctx.canvas.height = val;
		}
		return ctx.canvas.height;
	}

	function pixelWidth(val) {
		if (arguments.length > 0) {
			ctx.canvas.width = val;
		}
		return ctx.canvas.width;
	}

	function gridHeight(squares) {
		if (arguments.length > 0) {
			pixelHeight(squares * SIZE + (squares + 1) * WEIGHT);
		}
		return (pixelHeight() - WEIGHT) / (SIZE + WEIGHT);
	}

	function gridWidth(squares) {
		if (arguments.length > 0) {
			pixelWidth(squares * SIZE + (squares + 1) * WEIGHT);
		}
		return (pixelWidth() - WEIGHT) / (SIZE + WEIGHT);
	}

	function toPixels(sq) {
		return WEIGHT / 2 + sq * (WEIGHT + SIZE);
	}

	function mod(a, b) {
		return (a % b + b) % b;
	}

	function toSquares(px) {
		if (mod(px - WEIGHT, SIZE + WEIGHT) >= SIZE - WEIGHT) {
			// On a line
			return null;
		}
		return Math.floor((px - WEIGHT) / (SIZE + WEIGHT));
	}

	function clear() {
		ctx.clearRect(0, 0, pixelWidth(), pixelHeight());
	}

	function fill(x, y, color) {
		var _fillStyle = ctx.fillStyle;
		ctx.fillStyle = color;

		ctx.fillRect(toPixels(x) + WEIGHT / 2, toPixels(y) + WEIGHT / 2, SIZE, SIZE);

		ctx.fillStyle = _fillStyle;
	}

	function bridge(x1, y1, x2, y2, color) {
		if (Math.abs(x2 - x1) + Math.abs(y2 - y1) !== 1) {
			throw new Error("Squares are not adjacent.");
		}

		var x = Math.max(x1, x2),
		    y = Math.max(y1, y2);

		var _lineCap = ctx.lineCap;
		var _lineWidth = ctx.lineWidth;
		var _strokeStyle = ctx.strokeStyle;
		ctx.lineCap = "square";
		ctx.lineWidth = WEIGHT;
		ctx.strokeStyle = color;

		ctx.beginPath();
		if (x1 === x2) {
			// Bridge north/south squares
			// Narrower x dimensions
			ctx.moveTo(toPixels(x1) + WEIGHT, toPixels(y));
			ctx.lineTo(toPixels(x1 + 1) - WEIGHT, toPixels(y));
		} else {
			// Bridge east/west squares
			// Narrower y dimensions
			ctx.moveTo(toPixels(x), toPixels(y1) + WEIGHT);
			ctx.lineTo(toPixels(x), toPixels(y1 + 1) - WEIGHT);
		}
		ctx.stroke();

		ctx.lineCap = _lineCap;
		ctx.lineWidth = _lineWidth;
		ctx.strokeStyle = _strokeStyle;
	}

	function line(x1, y1, x2, y2) {
		var _lineCap = ctx.lineCap;
		var _lineWidth = ctx.lineWidth;
		var _strokeStyle = ctx.strokeStyle;
		ctx.lineCap = "round";
		ctx.lineWidth = WEIGHT;
		ctx.strokeStyle = "#16191d";

		ctx.beginPath();
		ctx.moveTo(toPixels(x1), toPixels(y1));
		ctx.lineTo(toPixels(x2), toPixels(y2));
		ctx.stroke();

		ctx.lineCap = _lineCap;
		ctx.lineWidth = _lineWidth;
		ctx.strokeStyle = _strokeStyle;
	}

	return {
		height: gridHeight,
		width: gridWidth,
		pixelHeight: pixelHeight,
		pixelWidth: pixelWidth,
		clear: clear,
		fill: fill,
		bridge: bridge,
		line: line,
		toPixels: toPixels,
		toSquares: toSquares
	};
};

module.exports = Grid;

},{}],3:[function(require,module,exports){
"use strict";

var Grid = require("./grid");
var random = require("./random");

var Maze = function (width, height) {
	var DIRECTIONS = ["north", "south", "east", "west"];
	var GREEN = "#4ecdc4",
	    RED = "#ff6b6b";

	var path = [];
	var maze, grid;

	function randomInt(max) {
		return Math.floor(random() * max);
	}

	function randomElement(arr) {
		return arr[randomInt(arr.length)];
	}

	function lastElement(arr) {
		return arr[arr.length - 1];
	}

	/**
  * Gets the coordinates of an adjacent square.
  * @param {object} start Starting square's coordinates.
  * @param {string} direction Cardinal direction of adjacent square.
  * @returns {object} Adjacent square's coordinates.
  */
	function adjacentSquare(start, direction) {
		switch (direction) {
			case "north":
				return start.y > 0 ? { x: start.x, y: start.y - 1 } : null;
			case "south":
				return start.y < height - 1 ? { x: start.x, y: start.y + 1 } : null;
			case "east":
				return start.x < width - 1 ? { x: start.x + 1, y: start.y } : null;
			case "west":
				return start.x > 0 ? { x: start.x - 1, y: start.y } : null;
			default:
				throw new Exception("Invalid direction " + dir);
		}
	}

	/**
  * Gets the coordinates of all squares adjacent to a given square.
  * @param {object} start Coordinates of the starting square.
  * @returns {object} Coordinates of adjacent squares in each direction.
  */
	function adjacentSquares(start) {
		return DIRECTIONS.reduce(function (obj, dir) {
			obj[dir] = adjacentSquare(start, dir);
			return obj;
		}, {});
	}

	/**
  * Gets the relative direction between two adjacent squares.
  * @param {object} start The starting square.
  * @param {object} end The ending square.
  * @returns {strign} Cardinal direction from start to end.
  */
	function relativeDirection(start, end) {
		if (Math.abs(end.x - start.x) + Math.abs(end.y - start.y) > 1) {
			// Squares are not adjacent
			return null;
		}

		if (start.x < end.x) {
			return "east";
		} else if (end.x < start.x) {
			return "west";
		} else if (start.y < end.y) {
			return "south";
		} else if (end.y < start.y) {
			return "north";
		}
	}

	function generate() {
		var mesh = [];
		var edges = [];
		var length = 0;
		var x, y;
		var start, end;

		function getSquare(square) {
			return mesh[square.x][square.y];
		}

		function isolated(square) {
			square = getSquare(square);
			return DIRECTIONS.every(function (dir) {
				return square[dir] !== true;
			});
		}

		function connect(a, b) {
			//console.log(['CONNECTING (',a.x,',',a.y,') and (',b.x,',',b.y,').'].join(''));
			mesh[a.x][a.y][relativeDirection(a, b)] = true;
			mesh[b.x][b.y][relativeDirection(b, a)] = true;
		}

		function openEdge(square) {
			var x = square.x;
			var y = square.y;
			if (x === 0) {
				mesh[x][y].west = true;
			} else if (y === 0) {
				mesh[x][y].north = true;
			} else if (x === width - 1) {
				mesh[x][y].east = true;
			} else if (y === height - 1) {
				mesh[x][y].south = true;
			} else {
				throw new Error("Destination not on edge.");
			}
		}

		function search(pos) {
			var adjacencies, options, heading, next;

			if (pos.x === end.x && pos.y === end.y) {
				openEdge(pos);
				console.log("LENGTH", length);
				return;
			}

			adjacencies = adjacentSquares(pos);

			while (1) {
				options = Object.keys(adjacencies).filter(function (dir) {
					return adjacencies[dir];
				}).filter(function (dir) {
					return isolated(adjacentSquare(pos, dir));
				});
				if (!options.length) break;

				heading = randomElement(options);
				next = adjacencies[heading];
				connect(pos, next);
				length++;
				search(next);
				length--;
			}
		}

		for (x = 0; x < width; x++) {
			mesh[x] = [];
			for (y = 0; y < height; y++) {
				if (x === 0 || y === 0 || x === width - 1 || y === height - 1) {
					edges.push({ x: x, y: y });
				}

				mesh[x][y] = {
					north: 0 < y ? false : null,
					south: y < height - 1 ? false : null,
					west: 0 < x ? false : null,
					east: x < width - 1 ? false : null
				};
			}
		}

		start = randomElement(edges);
		path.push(start);
		do {
			end = randomElement(edges);
		} while (start.x === end.x || start.y === end.y);

		openEdge(start);
		search(start);

		return {
			mesh: mesh,
			start: start,
			end: end
		};
	}

	function bridgeEdge(square, color) {
		if (square.x === 0) {
			// West
			grid.bridge(square.x - 1, square.y, square.x, square.y, color);
		} else if (square.y === 0) {
			// North
			grid.bridge(square.x, square.y - 1, square.x, square.y, color);
		} else if (square.x === width - 1) {
			// East
			grid.bridge(square.x, square.y, square.x + 1, square.y, color);
		} else if (square.y === height - 1) {
			// South
			grid.bridge(square.x, square.y, square.x, square.y + 1, color);
		} else {
			throw new Error("Square is not on edge.");
		}
	}

	function render($el) {
		var x, y;

		grid = new Grid($el);
		grid.clear();
		grid.width(width);
		grid.height(height);

		for (x = 0; x < width; x++) {
			for (y = 0; y < height; y++) {
				if (!maze.mesh[x][y].west) {
					grid.line(x, y, x, y + 1);
				}
				if (!maze.mesh[x][y].north) {
					grid.line(x, y, x + 1, y);
				}

				// Only need to draw south and east on edges
				if (x === width - 1 && !maze.mesh[x][y].east) {
					grid.line(x + 1, y, x + 1, y + 1);
				}
				if (y === height - 1 && !maze.mesh[x][y].south) {
					grid.line(x, y + 1, x + 1, y + 1);
				}
			}
		}

		grid.fill(maze.start.x, maze.start.y, GREEN);
		grid.fill(maze.end.x, maze.end.y, RED);
		bridgeEdge(maze.start, GREEN);
		bridgeEdge(maze.end, RED);
	}

	function move(dir) {
		var pos = lastElement(path);
		var previous = path[path.length - 2];
		var next;

		// Don't break down walls
		if (!maze.mesh[pos.x][pos.y][dir]) {
			return false;
		}next = adjacentSquare(pos, dir);
		if (!next) {
			return false;
		}if (previous && next.x === previous.x && next.y === previous.y) {
			grid.bridge(pos.x, pos.y, next.x, next.y, RED);
			grid.fill(pos.x, pos.y, RED);
			path.pop();
		} else {
			grid.bridge(pos.x, pos.y, next.x, next.y, GREEN);
			grid.fill(next.x, next.y, GREEN);
			path.push(next);
		}

		if (next.x === maze.end.x && next.y === maze.end.y) {
			bridgeEdge(next, GREEN);
			return true;
		}
		return false;
	}

	function enterSquare(square) {
		var pos = lastElement(path);
		var dir = relativeDirection(pos, square);
		if (dir) move(dir);
	}

	var hover = (function () {
		var _x, _y;

		return function (x, y) {
			x = grid.toSquares(x);
			y = grid.toSquares(y);
			if (x !== null && y !== null && (x !== _x || y !== _y)) {
				_x = x;
				_y = y;
				enterSquare({ x: x, y: y });
			}
		};
	})();

	maze = generate();

	return {
		render: render,
		move: move,
		hover: hover
	};
};

module.exports = Maze;

},{"./grid":2,"./random":4}],4:[function(require,module,exports){
"use strict";

function random() {
	var x = Math.sin(random.seed++) * 10000;
	return x - Math.floor(x);
}

random.seed = Math.random();

module.exports = random;

},{}]},{},[1])


//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvYXBwLmpzIiwic3JjL2dyaWQuanMiLCJzcmMvbWF6ZS5qcyIsInNyYy9yYW5kb20uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7O0FDQUEsQ0FBQyxZQUFZO0FBRWIsS0FBSSxJQUFJLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzdCLEtBQUksTUFBTSxHQUFHLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQzs7QUFFakMsS0FBSSxJQUFJLENBQUM7O0FBRVQsVUFBUyxRQUFRLEdBQUc7QUFDbkIsTUFBSSxLQUFLLEdBQUcsQ0FBQyxRQUFRLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUssQ0FBQztBQUNwRCxNQUFJLE1BQU0sR0FBRyxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDLENBQUMsS0FBSyxDQUFDOztBQUV0RCxNQUFJLElBQUksR0FBRyxHQUFHLEdBQUcsS0FBSyxHQUFHLEdBQUcsR0FBRyxNQUFNLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUM7QUFDMUQsTUFBSSxJQUFJLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQztBQUNyRCxVQUFRLENBQUMsY0FBYyxDQUFDLFdBQVcsQ0FBQyxDQUFDLFlBQVksQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUM7O0FBRWhFLE1BQUksR0FBRyxJQUFJLElBQUksQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDL0IsTUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7RUFDL0M7O0FBRUQsU0FBUSxDQUFDLGNBQWMsQ0FBQyxVQUFVLENB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LENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7R0FDL0QsTUFBTSxJQUFJLE1BQU0sQ0FBQyxDQUFDLEtBQU0sTUFBTSxHQUFHLENBQUMsQUFBQyxFQUFFOztBQUNyQyxPQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO0dBQy9ELE1BQU07QUFDTixTQUFNLElBQUksS0FBSyxDQUFDLHdCQUF3QixDQUFDLENBQUM7R0FDMUM7RUFDRDs7QUFFRCxVQUFTLE1BQU0sQ0FBQyxHQUFHLEVBQUU7QUFDcEIsTUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDOztBQUVULE1BQUksR0FBRyxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNyQixNQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7QUFDYixNQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ2xCLE1BQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7O0FBRXBCLE9BQUssQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQzNCLFFBQUssQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQzVCLFFBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRTtBQUMxQixTQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztLQUMxQjtBQUNELFFBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRTtBQUMzQixTQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztLQUMxQjs7O0FBR0QsUUFBSSxDQUFDLEtBQUssS0FBSyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFO0FBQzdDLFNBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7S0FDbEM7QUFDRCxRQUFJLENBQUMsS0FBSyxNQUFNLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUU7QUFDL0MsU0FBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztLQUNsQztJQUNEO0dBQ0Q7O0FBRUQsTUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztBQUM3QyxNQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBQ3ZDLFlBQVUsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQzlCLFlBQVUsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0VBQzFCOztBQUVELFVBQVMsSUFBSSxDQUFDLEdBQUcsRUFBRTtBQUNsQixN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LFFBQVEsRUFBRSxDQUFDOztBQUVsQixRQUFPO0FBQ04sUUFBTSxFQUFOLE1BQU07QUFDTixNQUFJLEVBQUosSUFBSTtBQUNKLE9BQUssRUFBTCxLQUFLO0VBQ0wsQ0FBQztDQUVGLENBQUE7O0FBRUQsTUFBTSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7Ozs7O0FDcFN0QixTQUFTLE1BQU0sR0FBRztBQUNqQixLQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQyxHQUFHLEtBQUssQ0FBQztBQUN4QyxRQUFPLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0NBQ3pCOztBQUVELE1BQU0sQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDOztBQUU1QixNQUFNLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQyIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VSb290IjoiL2pzeCIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiKGZ1bmN0aW9uICgpIHtcblxudmFyIE1hemUgPSByZXF1aXJlKCcuL21hemUnKTtcbnZhciByYW5kb20gPSByZXF1aXJlKCcuL3JhbmRvbScpO1xuXG52YXIgbWF6ZTtcblxuZnVuY3Rpb24gZ2VuZXJhdGUoKSB7XG5cdHZhciB3aWR0aCA9ICtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2lkdGgnKS52YWx1ZTtcblx0dmFyIGhlaWdodCA9ICtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVpZ2h0JykudmFsdWU7XG5cblx0dmFyIGhhc2ggPSAnIycgKyB3aWR0aCArICd4JyArIGhlaWdodCArICdzJyArIHJhbmRvbS5zZWVkO1xuXHR2YXIgaHJlZiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KCcjJylbMF0gKyBoYXNoO1xuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGVybWFsaW5rJykuc2V0QXR0cmlidXRlKCdocmVmJywgaHJlZik7XG5cblx0bWF6ZSA9IG5ldyBNYXplKHdpZHRoLCBoZWlnaHQpO1xuXHRtYXplLnJlbmRlcihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FudmFzJykpO1xufVxuXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ2VuZXJhdGUnKVxuXHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcblx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdGdlbmVyYXRlKCk7XG5cdH0pO1xuZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uIChldmVudCkge1xuXHR2YXIga2V5ID0gZXZlbnQua2V5IHx8IGV2ZW50LmNoYXJDb2RlIHx8IGV2ZW50LmtleUNvZGU7XG5cdHZhciBkaXJlY3Rpb24gPSBbJ3dlc3QnLCAnbm9ydGgnLCAnZWFzdCcsICdzb3V0aCddW2tleSAtIDM3XTtcblx0aWYgKCFkaXJlY3Rpb24pIHJldHVybjtcblxuXHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRtYXplLm1vdmUoZGlyZWN0aW9uKTtcbn0pO1xuXG52YXIgWywgd2lkdGgsIGhlaWdodCwgc2VlZF0gPSAvIyhcXGQrKXgoXFxkKykoPzpzKFxcZCsuXFxkKykpP3wuKi9cblx0LmV4ZWMod2luZG93LmxvY2F0aW9uLmhhc2gpO1xuaWYgKHdpZHRoICYmIGhlaWdodCkge1xuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2lkdGgnKS52YWx1ZSA9IHdpZHRoO1xuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVpZ2h0JykudmFsdWUgPSBoZWlnaHQ7XG59XG5pZiAoc2VlZCkge1xuXHRyYW5kb20uc2VlZCA9IHBhcnNlRmxvYXQoc2VlZCk7XG59XG5cbnZhciBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FudmFzJyk7XG5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZnVuY3Rpb24gKGV2ZW50KSB7XG5cdG1hemUuaG92ZXIoZXZlbnQubGF5ZXJYLCBldmVudC5sYXllclkpO1xufSk7XG5cbmdlbmVyYXRlKCk7XG5cbn0pKCk7XG4iLCJ2YXIgR3JpZCA9IGZ1bmN0aW9uICgkZWwpIHtcblxuXHR2YXIgU0laRSA9IDIwOyAvLyBXaWR0aCBvZiBzcXVhcmUgaW4gcGl4ZWxzXG5cdHZhciBXRUlHSFQgPSAyOyAvLyBXaWR0aCBvZiBsaW5lIGluIHBpeGVsc1xuXG5cdHZhciBjdHggPSAkZWwuZ2V0Q29udGV4dCgnMmQnKTtcblxuXHRmdW5jdGlvbiBwaXhlbEhlaWdodCh2YWwpIHtcblx0XHRpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDApIHtcblx0XHRcdGN0eC5jYW52YXMuaGVpZ2h0ID0gdmFsO1xuXHRcdH1cblx0XHRyZXR1cm4gY3R4LmNhbnZhcy5oZWlnaHQ7XG5cdH1cblxuXHRmdW5jdGlvbiBwaXhlbFdpZHRoKHZhbCkge1xuXHRcdGlmIChhcmd1bWVudHMubGVuZ3RoID4gMCkge1xuXHRcdFx0Y3R4LmNhbnZhcy53aWR0aCA9IHZhbDtcblx0XHR9XG5cdFx0cmV0dXJuIGN0eC5jYW52YXMud2lkdGg7XG5cdH1cblxuXHRmdW5jdGlvbiBncmlkSGVpZ2h0KHNxdWFyZXMpIHtcblx0XHRpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDApIHtcblx0XHRcdHBpeGVsSGVpZ2h0KHNxdWFyZXMgKiBTSVpFICsgKHNxdWFyZXMgKyAxKSAqIFdFSUdIVCk7XG5cdFx0fVxuXHRcdHJldHVybiAocGl4ZWxIZWlnaHQoKSAtIFdFSUdIVCkgLyAoU0laRSArIFdFSUdIVCk7XG5cdH1cblxuXHRmdW5jdGlvbiBncmlkV2lkdGgoc3F1YXJlcykge1xuXHRcdGlmIChhcmd1bWVudHMubGVuZ3RoID4gMCkge1xuXHRcdFx0cGl4ZWxXaWR0aChzcXVhcmVzICogU0laRSArIChzcXVhcmVzICsgMSkgKiBXRUlHSFQpO1xuXHRcdH1cblx0XHRyZXR1cm4gKHBpeGVsV2lkdGgoKSAtIFdFSUdIVCkgLyAoU0laRSArIFdFSUdIVCk7XG5cdH1cblxuXHRmdW5jdGlvbiB0b1BpeGVscyhzcSkge1xuXHRcdHJldHVybiAoV0VJR0hUIC8gMikgKyBzcSAqIChXRUlHSFQgKyBTSVpFKTtcblx0fVxuXG5cdGZ1bmN0aW9uIG1vZChhLCBiKSB7XG5cdFx0cmV0dXJuICgoYSAlIGIpICsgYikgJSBiO1xuXHR9XG5cblx0ZnVuY3Rpb24gdG9TcXVhcmVzKHB4KSB7XG5cdFx0aWYgKG1vZChweCAtIFdFSUdIVCwgU0laRSArIFdFSUdIVCkgPj0gKFNJWkUgLSBXRUlHSFQpKSB7XG5cdFx0XHQvLyBPbiBhIGxpbmVcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblx0XHRyZXR1cm4gTWF0aC5mbG9vcigocHggLSBXRUlHSFQpIC8gKFNJWkUgKyBXRUlHSFQpKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNsZWFyKCkge1xuXHRcdGN0eC5jbGVhclJlY3QoMCwgMCwgcGl4ZWxXaWR0aCgpLCBwaXhlbEhlaWdodCgpKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGZpbGwoeCwgeSwgY29sb3IpIHtcblx0XHR2YXIgX2ZpbGxTdHlsZSA9IGN0eC5maWxsU3R5bGU7XG5cdFx0Y3R4LmZpbGxTdHlsZSA9IGNvbG9yO1xuXG5cdFx0Y3R4LmZpbGxSZWN0KFxuXHRcdFx0dG9QaXhlbHMoeCkgKyAoV0VJR0hUIC8gMiksXG5cdFx0XHR0b1BpeGVscyh5KSArIChXRUlHSFQgLyAyKSxcblx0XHRcdFNJWkUsIFNJWkVcblx0XHQpO1xuXG5cdFx0Y3R4LmZpbGxTdHlsZSA9IF9maWxsU3R5bGU7XG5cdH1cblxuXHRmdW5jdGlvbiBicmlkZ2UoeDEsIHkxLCB4MiwgeTIsIGNvbG9yKSB7XG5cdFx0aWYgKE1hdGguYWJzKHgyIC0geDEpICsgTWF0aC5hYnMoeTIgLSB5MSkgIT09IDEpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignU3F1YXJlcyBhcmUgbm90IGFkamFjZW50LicpO1xuXHRcdH1cblxuXHRcdHZhciB4ID0gTWF0aC5tYXgoeDEsIHgyKSwgeSA9IE1hdGgubWF4KHkxLCB5Mik7XG5cblx0XHR2YXIgX2xpbmVDYXAgICAgID0gY3R4LmxpbmVDYXA7XG5cdFx0dmFyIF9saW5lV2lkdGggICA9IGN0eC5saW5lV2lkdGg7XG5cdFx0dmFyIF9zdHJva2VTdHlsZSA9IGN0eC5zdHJva2VTdHlsZTtcblx0XHRjdHgubGluZUNhcCAgICAgID0gJ3NxdWFyZSc7XG5cdFx0Y3R4LmxpbmVXaWR0aCAgICA9IFdFSUdIVDtcblx0XHRjdHguc3Ryb2tlU3R5bGUgID0gY29sb3I7XG5cblx0XHRjdHguYmVnaW5QYXRoKCk7XG5cdFx0aWYgKHgxID09PSB4Mikge1xuXHRcdFx0Ly8gQnJpZGdlIG5vcnRoL3NvdXRoIHNxdWFyZXNcblx0XHRcdC8vIE5hcnJvd2VyIHggZGltZW5zaW9uc1xuXHRcdFx0Y3R4Lm1vdmVUbyh0b1BpeGVscyh4MSkgKyBXRUlHSFQsIHRvUGl4ZWxzKHkpKTtcblx0XHRcdGN0eC5saW5lVG8odG9QaXhlbHMoeDEgKyAxKSAtIFdFSUdIVCwgdG9QaXhlbHMoeSkpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBCcmlkZ2UgZWFzdC93ZXN0IHNxdWFyZXNcblx0XHRcdC8vIE5hcnJvd2VyIHkgZGltZW5zaW9uc1xuXHRcdFx0Y3R4Lm1vdmVUbyh0b1BpeGVscyh4KSwgdG9QaXhlbHMoeTEpICsgV0VJR0hUKTtcblx0XHRcdGN0eC5saW5lVG8odG9QaXhlbHMoeCksIHRvUGl4ZWxzKHkxICsgMSkgLSBXRUlHSFQpO1xuXHRcdH1cblx0XHRjdHguc3Ryb2tlKCk7XG5cblx0XHRjdHgubGluZUNhcCAgICAgPSBfbGluZUNhcDtcblx0XHRjdHgubGluZVdpZHRoICAgPSBfbGluZVdpZHRoO1xuXHRcdGN0eC5zdHJva2VTdHlsZSA9IF9zdHJva2VTdHlsZTtcblx0fVxuXG5cdGZ1bmN0aW9uIGxpbmUoeDEsIHkxLCB4MiwgeTIpIHtcblx0XHR2YXIgX2xpbmVDYXAgICAgID0gY3R4LmxpbmVDYXA7XG5cdFx0dmFyIF9saW5lV2lkdGggICA9IGN0eC5saW5lV2lkdGg7XG5cdFx0dmFyIF9zdHJva2VTdHlsZSA9IGN0eC5zdHJva2VTdHlsZTtcblx0XHRjdHgubGluZUNhcCAgICAgID0gJ3JvdW5kJztcblx0XHRjdHgubGluZVdpZHRoICAgID0gV0VJR0hUO1xuXHRcdGN0eC5zdHJva2VTdHlsZSAgPSAnIzE2MTkxZCc7XG5cblx0XHRjdHguYmVnaW5QYXRoKCk7XG5cdFx0Y3R4Lm1vdmVUbyh0b1BpeGVscyh4MSksIHRvUGl4ZWxzKHkxKSk7XG5cdFx0Y3R4LmxpbmVUbyh0b1BpeGVscyh4MiksIHRvUGl4ZWxzKHkyKSk7XG5cdFx0Y3R4LnN0cm9rZSgpO1xuXG5cdFx0Y3R4LmxpbmVDYXAgICAgID0gX2xpbmVDYXA7XG5cdFx0Y3R4LmxpbmVXaWR0aCAgID0gX2xpbmVXaWR0aDtcblx0XHRjdHguc3Ryb2tlU3R5bGUgPSBfc3Ryb2tlU3R5bGU7XG5cdH1cblxuXHRyZXR1cm4ge1xuXHRcdGhlaWdodDogZ3JpZEhlaWdodCxcblx0XHR3aWR0aDogZ3JpZFdpZHRoLFxuXHRcdHBpeGVsSGVpZ2h0LFxuXHRcdHBpeGVsV2lkdGgsXG5cdFx0Y2xlYXIsXG5cdFx0ZmlsbCxcblx0XHRicmlkZ2UsXG5cdFx0bGluZSxcblx0XHR0b1BpeGVscyxcblx0XHR0b1NxdWFyZXNcblx0fTtcblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBHcmlkO1xuIiwidmFyIEdyaWQgPSByZXF1aXJlKCcuL2dyaWQnKTtcbnZhciByYW5kb20gPSByZXF1aXJlKCcuL3JhbmRvbScpO1xuXG52YXIgTWF6ZSA9IGZ1bmN0aW9uICh3aWR0aCwgaGVpZ2h0KSB7XG5cblx0dmFyIERJUkVDVElPTlMgPSBbJ25vcnRoJywgJ3NvdXRoJywgJ2Vhc3QnLCAnd2VzdCddO1xuXHR2YXIgR1JFRU4gPSAnIzRlY2RjNCcsIFJFRCA9ICcjZmY2YjZiJztcblxuXHR2YXIgcGF0aCA9IFtdO1xuXHR2YXIgbWF6ZSwgZ3JpZDtcblxuXHRmdW5jdGlvbiByYW5kb21JbnQobWF4KSB7XG5cdFx0cmV0dXJuIE1hdGguZmxvb3IocmFuZG9tKCkgKiBtYXgpO1xuXHR9XG5cblx0ZnVuY3Rpb24gcmFuZG9tRWxlbWVudChhcnIpIHtcblx0XHRyZXR1cm4gYXJyW3JhbmRvbUludChhcnIubGVuZ3RoKV07XG5cdH1cblxuXHRmdW5jdGlvbiBsYXN0RWxlbWVudChhcnIpIHtcblx0XHRyZXR1cm4gYXJyW2Fyci5sZW5ndGggLSAxXTtcblx0fVxuXG5cdC8qKlxuXHQgKiBHZXRzIHRoZSBjb29yZGluYXRlcyBvZiBhbiBhZGphY2VudCBzcXVhcmUuXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBzdGFydCBTdGFydGluZyBzcXVhcmUncyBjb29yZGluYXRlcy5cblx0ICogQHBhcmFtIHtzdHJpbmd9IGRpcmVjdGlvbiBDYXJkaW5hbCBkaXJlY3Rpb24gb2YgYWRqYWNlbnQgc3F1YXJlLlxuXHQgKiBAcmV0dXJucyB7b2JqZWN0fSBBZGphY2VudCBzcXVhcmUncyBjb29yZGluYXRlcy5cblx0ICovXG5cdGZ1bmN0aW9uIGFkamFjZW50U3F1YXJlKHN0YXJ0LCBkaXJlY3Rpb24pIHtcblx0XHRzd2l0Y2ggKGRpcmVjdGlvbikge1xuXHRcdFx0Y2FzZSAnbm9ydGgnOlxuXHRcdFx0XHRyZXR1cm4gc3RhcnQueSA+IDBcblx0XHRcdFx0XHQ/IHsgeDogc3RhcnQueCwgeTogc3RhcnQueSAtIDEgfVxuXHRcdFx0XHRcdDogbnVsbDtcblx0XHRcdGNhc2UgJ3NvdXRoJzpcblx0XHRcdFx0cmV0dXJuIHN0YXJ0LnkgPCBoZWlnaHQgLSAxXG5cdFx0XHRcdFx0PyB7IHg6IHN0YXJ0LngsIHk6IHN0YXJ0LnkgKyAxIH1cblx0XHRcdFx0XHQ6IG51bGw7XG5cdFx0XHRjYXNlICdlYXN0Jzpcblx0XHRcdFx0cmV0dXJuIHN0YXJ0LnggPCB3aWR0aCAtIDFcblx0XHRcdFx0XHQ/IHsgeDogc3RhcnQueCArIDEsIHk6IHN0YXJ0LnkgfVxuXHRcdFx0XHRcdDogbnVsbDtcblx0XHRcdGNhc2UgJ3dlc3QnOlxuXHRcdFx0XHRyZXR1cm4gc3RhcnQueCA+IDBcblx0XHRcdFx0XHQ/IHsgeDogc3RhcnQueCAtIDEsIHk6IHN0YXJ0LnkgfVxuXHRcdFx0XHRcdDogbnVsbDtcblx0XHRcdGRlZmF1bHQ6IHRocm93IG5ldyBFeGNlcHRpb24oJ0ludmFsaWQgZGlyZWN0aW9uICcgKyBkaXIpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBHZXRzIHRoZSBjb29yZGluYXRlcyBvZiBhbGwgc3F1YXJlcyBhZGphY2VudCB0byBhIGdpdmVuIHNxdWFyZS5cblx0ICogQHBhcmFtIHtvYmplY3R9IHN0YXJ0IENvb3JkaW5hdGVzIG9mIHRoZSBzdGFydGluZyBzcXVhcmUuXG5cdCAqIEByZXR1cm5zIHtvYmplY3R9IENvb3JkaW5hdGVzIG9mIGFkamFjZW50IHNxdWFyZXMgaW4gZWFjaCBkaXJlY3Rpb24uXG5cdCAqL1xuXHRmdW5jdGlvbiBhZGphY2VudFNxdWFyZXMoc3RhcnQpIHtcblx0XHRyZXR1cm4gRElSRUNUSU9OUy5yZWR1Y2UoKG9iaiwgZGlyKSA9PiB7XG5cdFx0XHRvYmpbZGlyXSA9IGFkamFjZW50U3F1YXJlKHN0YXJ0LCBkaXIpO1xuXHRcdFx0cmV0dXJuIG9iajtcblx0XHR9LCB7fSk7XG5cdH1cblxuXHQvKipcblx0ICogR2V0cyB0aGUgcmVsYXRpdmUgZGlyZWN0aW9uIGJldHdlZW4gdHdvIGFkamFjZW50IHNxdWFyZXMuXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBzdGFydCBUaGUgc3RhcnRpbmcgc3F1YXJlLlxuXHQgKiBAcGFyYW0ge29iamVjdH0gZW5kIFRoZSBlbmRpbmcgc3F1YXJlLlxuXHQgKiBAcmV0dXJucyB7c3RyaWdufSBDYXJkaW5hbCBkaXJlY3Rpb24gZnJvbSBzdGFydCB0byBlbmQuXG5cdCAqL1xuXHRmdW5jdGlvbiByZWxhdGl2ZURpcmVjdGlvbihzdGFydCwgZW5kKSB7XG5cdFx0aWYgKE1hdGguYWJzKGVuZC54IC0gc3RhcnQueCkgKyBNYXRoLmFicyhlbmQueSAtIHN0YXJ0LnkpID4gMSkge1xuXHRcdFx0Ly8gU3F1YXJlcyBhcmUgbm90IGFkamFjZW50XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cblx0XHRpZiAoc3RhcnQueCA8IGVuZC54KSB7XG5cdFx0XHRyZXR1cm4gJ2Vhc3QnO1xuXHRcdH0gZWxzZSBpZiAoZW5kLnggPCBzdGFydC54KSB7XG5cdFx0XHRyZXR1cm4gJ3dlc3QnO1xuXHRcdH0gZWxzZSBpZiAoc3RhcnQueSA8IGVuZC55KSB7XG5cdFx0XHRyZXR1cm4gJ3NvdXRoJztcblx0XHR9IGVsc2UgaWYgKGVuZC55IDwgc3RhcnQueSkge1xuXHRcdFx0cmV0dXJuICdub3J0aCc7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gZ2VuZXJhdGUoKSB7XG5cdFx0dmFyIG1lc2ggPSBbXTtcblx0XHR2YXIgZWRnZXMgPSBbXTtcblx0XHR2YXIgbGVuZ3RoID0gMDtcblx0XHR2YXIgeCwgeTtcblx0XHR2YXIgc3RhcnQsIGVuZDtcblxuXHRcdGZ1bmN0aW9uIGdldFNxdWFyZShzcXVhcmUpIHtcblx0XHRcdHJldHVybiBtZXNoW3NxdWFyZS54XVtzcXVhcmUueV07XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gaXNvbGF0ZWQoc3F1YXJlKSB7XG5cdFx0XHRzcXVhcmUgPSBnZXRTcXVhcmUoc3F1YXJlKTtcblx0XHRcdHJldHVybiBESVJFQ1RJT05TLmV2ZXJ5KGRpciA9PiBzcXVhcmVbZGlyXSAhPT0gdHJ1ZSk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gY29ubmVjdChhLCBiKSB7XG5cdFx0XHQvL2NvbnNvbGUubG9nKFsnQ09OTkVDVElORyAoJyxhLngsJywnLGEueSwnKSBhbmQgKCcsYi54LCcsJyxiLnksJykuJ10uam9pbignJykpO1xuXHRcdFx0bWVzaFthLnhdW2EueV1bcmVsYXRpdmVEaXJlY3Rpb24oYSwgYildID0gdHJ1ZTtcblx0XHRcdG1lc2hbYi54XVtiLnldW3JlbGF0aXZlRGlyZWN0aW9uKGIsIGEpXSA9IHRydWU7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gb3BlbkVkZ2Uoc3F1YXJlKSB7XG5cdFx0XHR2YXIge3gsIHl9ID0gc3F1YXJlO1xuXHRcdFx0aWYgKHggPT09IDApIHtcblx0XHRcdFx0bWVzaFt4XVt5XS53ZXN0ID0gdHJ1ZTtcblx0XHRcdH0gZWxzZSBpZiAoeSA9PT0gMCkge1xuXHRcdFx0XHRtZXNoW3hdW3ldLm5vcnRoID0gdHJ1ZTtcblx0XHRcdH0gZWxzZSBpZiAoeCA9PT0gKHdpZHRoIC0gMSkpIHtcblx0XHRcdFx0bWVzaFt4XVt5XS5lYXN0ID0gdHJ1ZTtcblx0XHRcdH0gZWxzZSBpZiAoeSA9PT0gKGhlaWdodCAtIDEpKSB7XG5cdFx0XHRcdG1lc2hbeF1beV0uc291dGggPSB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdEZXN0aW5hdGlvbiBub3Qgb24gZWRnZS4nKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBzZWFyY2gocG9zKSB7XG5cdFx0XHR2YXIgYWRqYWNlbmNpZXMsIG9wdGlvbnMsIGhlYWRpbmcsIG5leHQ7XG5cblx0XHRcdGlmIChwb3MueCA9PT0gZW5kLnggJiYgcG9zLnkgPT09IGVuZC55KSB7XG5cdFx0XHRcdG9wZW5FZGdlKHBvcyk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdMRU5HVEgnLCBsZW5ndGgpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGFkamFjZW5jaWVzID0gYWRqYWNlbnRTcXVhcmVzKHBvcyk7XG5cblx0XHRcdHdoaWxlICgxKSB7XG5cdFx0XHRcdG9wdGlvbnMgPSBPYmplY3Qua2V5cyhhZGphY2VuY2llcylcblx0XHRcdFx0XHQuZmlsdGVyKGRpciA9PiBhZGphY2VuY2llc1tkaXJdKVxuXHRcdFx0XHRcdC5maWx0ZXIoZGlyID0+IGlzb2xhdGVkKGFkamFjZW50U3F1YXJlKHBvcywgZGlyKSkpO1xuXHRcdFx0XHRpZiAoIW9wdGlvbnMubGVuZ3RoKSBicmVhaztcblxuXHRcdFx0XHRoZWFkaW5nID0gcmFuZG9tRWxlbWVudChvcHRpb25zKTtcblx0XHRcdFx0bmV4dCA9IGFkamFjZW5jaWVzW2hlYWRpbmddO1xuXHRcdFx0XHRjb25uZWN0KHBvcywgbmV4dCk7XG5cdFx0XHRcdGxlbmd0aCsrO1xuXHRcdFx0XHRzZWFyY2gobmV4dCk7XG5cdFx0XHRcdGxlbmd0aC0tO1xuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0Zm9yICh4ID0gMDsgeCA8IHdpZHRoOyB4KyspIHtcblx0XHRcdG1lc2hbeF0gPSBbXTtcblx0XHRcdGZvciAoeSA9IDA7IHkgPCBoZWlnaHQ7IHkrKykge1xuXHRcdFx0XHRpZiAoeCA9PT0gMCB8fFxuXHRcdFx0XHRcdHkgPT09IDAgfHxcblx0XHRcdFx0XHR4ID09PSAod2lkdGggLSAxKSB8fFxuXHRcdFx0XHRcdHkgPT09IChoZWlnaHQgLSAxKVxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHRlZGdlcy5wdXNoKHt4LCB5fSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRtZXNoW3hdW3ldID0ge1xuXHRcdFx0XHRcdG5vcnRoOiAwIDwgeSA/IGZhbHNlIDogbnVsbCxcblx0XHRcdFx0XHRzb3V0aDogeSA8IChoZWlnaHQgLSAxKSA/IGZhbHNlIDogbnVsbCxcblx0XHRcdFx0XHR3ZXN0OiAwIDwgeCA/IGZhbHNlIDogbnVsbCxcblx0XHRcdFx0XHRlYXN0OiB4IDwgKHdpZHRoIC0gMSkgPyBmYWxzZSA6IG51bGxcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRzdGFydCA9IHJhbmRvbUVsZW1lbnQoZWRnZXMpO1xuXHRcdHBhdGgucHVzaChzdGFydCk7XG5cdFx0ZG8ge1xuXHRcdFx0ZW5kID0gcmFuZG9tRWxlbWVudChlZGdlcyk7XG5cdFx0fSB3aGlsZSAoc3RhcnQueCA9PT0gZW5kLnggfHwgc3RhcnQueSA9PT0gZW5kLnkpO1xuXG5cdFx0b3BlbkVkZ2Uoc3RhcnQpO1xuXHRcdHNlYXJjaChzdGFydCk7XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0bWVzaCxcblx0XHRcdHN0YXJ0LFxuXHRcdFx0ZW5kXG5cdFx0fTtcblx0fVxuXG5cdGZ1bmN0aW9uIGJyaWRnZUVkZ2Uoc3F1YXJlLCBjb2xvcikge1xuXHRcdGlmIChzcXVhcmUueCA9PT0gMCkgeyAvLyBXZXN0XG5cdFx0XHRncmlkLmJyaWRnZShzcXVhcmUueCAtIDEsIHNxdWFyZS55LCBzcXVhcmUueCwgc3F1YXJlLnksIGNvbG9yKTtcblx0XHR9IGVsc2UgaWYgKHNxdWFyZS55ID09PSAwKSB7IC8vIE5vcnRoXG5cdFx0XHRncmlkLmJyaWRnZShzcXVhcmUueCwgc3F1YXJlLnkgLSAxLCBzcXVhcmUueCwgc3F1YXJlLnksIGNvbG9yKTtcblx0XHR9IGVsc2UgaWYgKHNxdWFyZS54ID09PSAod2lkdGggLSAxKSkgeyAvLyBFYXN0XG5cdFx0XHRncmlkLmJyaWRnZShzcXVhcmUueCwgc3F1YXJlLnksIHNxdWFyZS54ICsgMSwgc3F1YXJlLnksIGNvbG9yKTtcblx0XHR9IGVsc2UgaWYgKHNxdWFyZS55ID09PSAoaGVpZ2h0IC0gMSkpIHsgLy8gU291dGhcblx0XHRcdGdyaWQuYnJpZGdlKHNxdWFyZS54LCBzcXVhcmUueSwgc3F1YXJlLngsIHNxdWFyZS55ICsgMSwgY29sb3IpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ1NxdWFyZSBpcyBub3Qgb24gZWRnZS4nKTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiByZW5kZXIoJGVsKSB7XG5cdFx0dmFyIHgsIHk7XG5cblx0XHRncmlkID0gbmV3IEdyaWQoJGVsKTtcblx0XHRncmlkLmNsZWFyKCk7XG5cdFx0Z3JpZC53aWR0aCh3aWR0aCk7XG5cdFx0Z3JpZC5oZWlnaHQoaGVpZ2h0KTtcblxuXHRcdGZvciAoeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7XG5cdFx0XHRmb3IgKHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHtcblx0XHRcdFx0aWYgKCFtYXplLm1lc2hbeF1beV0ud2VzdCkge1xuXHRcdFx0XHRcdGdyaWQubGluZSh4LCB5LCB4LCB5ICsgMSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCFtYXplLm1lc2hbeF1beV0ubm9ydGgpIHtcblx0XHRcdFx0XHRncmlkLmxpbmUoeCwgeSwgeCArIDEsIHkpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gT25seSBuZWVkIHRvIGRyYXcgc291dGggYW5kIGVhc3Qgb24gZWRnZXNcblx0XHRcdFx0aWYgKHggPT09IHdpZHRoIC0gMSAmJiAhbWF6ZS5tZXNoW3hdW3ldLmVhc3QpIHtcblx0XHRcdFx0XHRncmlkLmxpbmUoeCArIDEsIHksIHggKyAxLCB5ICsgMSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHkgPT09IGhlaWdodCAtIDEgJiYgIW1hemUubWVzaFt4XVt5XS5zb3V0aCkge1xuXHRcdFx0XHRcdGdyaWQubGluZSh4LCB5ICsgMSwgeCArIDEsIHkgKyAxKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGdyaWQuZmlsbChtYXplLnN0YXJ0LngsIG1hemUuc3RhcnQueSwgR1JFRU4pO1xuXHRcdGdyaWQuZmlsbChtYXplLmVuZC54LCBtYXplLmVuZC55LCBSRUQpO1xuXHRcdGJyaWRnZUVkZ2UobWF6ZS5zdGFydCwgR1JFRU4pO1xuXHRcdGJyaWRnZUVkZ2UobWF6ZS5lbmQsIFJFRCk7XG5cdH1cblxuXHRmdW5jdGlvbiBtb3ZlKGRpcikge1xuXHRcdHZhciBwb3MgPSBsYXN0RWxlbWVudChwYXRoKTtcblx0XHR2YXIgcHJldmlvdXMgPSBwYXRoW3BhdGgubGVuZ3RoIC0gMl07XG5cdFx0dmFyIG5leHQ7XG5cblx0XHQvLyBEb24ndCBicmVhayBkb3duIHdhbGxzXG5cdFx0aWYgKCFtYXplLm1lc2hbcG9zLnhdW3Bvcy55XVtkaXJdKSByZXR1cm4gZmFsc2U7XG5cblx0XHRuZXh0ID0gYWRqYWNlbnRTcXVhcmUocG9zLCBkaXIpO1xuXHRcdGlmICghbmV4dCkgcmV0dXJuIGZhbHNlO1xuXG5cdFx0aWYgKHByZXZpb3VzICYmIG5leHQueCA9PT0gcHJldmlvdXMueCAmJiBuZXh0LnkgPT09IHByZXZpb3VzLnkpIHtcblx0XHRcdGdyaWQuYnJpZGdlKHBvcy54LCBwb3MueSwgbmV4dC54LCBuZXh0LnksIFJFRCk7XG5cdFx0XHRncmlkLmZpbGwocG9zLngsIHBvcy55LCBSRUQpO1xuXHRcdFx0cGF0aC5wb3AoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Z3JpZC5icmlkZ2UocG9zLngsIHBvcy55LCBuZXh0LngsIG5leHQueSwgR1JFRU4pO1xuXHRcdFx0Z3JpZC5maWxsKG5leHQueCwgbmV4dC55LCBHUkVFTik7XG5cdFx0XHRwYXRoLnB1c2gobmV4dCk7XG5cdFx0fVxuXG5cdFx0aWYgKG5leHQueCA9PT0gbWF6ZS5lbmQueCAmJiBuZXh0LnkgPT09IG1hemUuZW5kLnkpIHtcblx0XHRcdGJyaWRnZUVkZ2UobmV4dCwgR1JFRU4pO1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGZ1bmN0aW9uIGVudGVyU3F1YXJlKHNxdWFyZSkge1xuXHRcdHZhciBwb3MgPSBsYXN0RWxlbWVudChwYXRoKTtcblx0XHR2YXIgZGlyID0gcmVsYXRpdmVEaXJlY3Rpb24ocG9zLCBzcXVhcmUpO1xuXHRcdGlmIChkaXIpIG1vdmUoZGlyKTtcblx0fVxuXG5cdHZhciBob3ZlciA9IChmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIF94LCBfeTtcblxuXHRcdHJldHVybiBmdW5jdGlvbiAoeCwgeSkge1xuXHRcdFx0eCA9IGdyaWQudG9TcXVhcmVzKHgpO1xuXHRcdFx0eSA9IGdyaWQudG9TcXVhcmVzKHkpO1xuXHRcdFx0aWYgKHggIT09IG51bGwgJiYgeSAhPT0gbnVsbCAmJiAoeCAhPT0gX3ggfHwgeSAhPT0gX3kpKSB7XG5cdFx0XHRcdF94ID0geDtcblx0XHRcdFx0X3kgPSB5O1xuXHRcdFx0XHRlbnRlclNxdWFyZSh7eCwgeX0pO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0fSkoKTtcblxuXHRtYXplID0gZ2VuZXJhdGUoKTtcblxuXHRyZXR1cm4ge1xuXHRcdHJlbmRlcixcblx0XHRtb3ZlLFxuXHRcdGhvdmVyXG5cdH07XG5cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBNYXplO1xuIiwiZnVuY3Rpb24gcmFuZG9tKCkge1xuXHR2YXIgeCA9IE1hdGguc2luKHJhbmRvbS5zZWVkKyspICogMTAwMDA7XG5cdHJldHVybiB4IC0gTWF0aC5mbG9vcih4KTtcbn1cblxucmFuZG9tLnNlZWQgPSBNYXRoLnJhbmRvbSgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJhbmRvbTtcbiJdfQ==