(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _slicedToArray = function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { var _arr = []; for (var _iterator = arr[Symbol.iterator](), _step; !(_step = _iterator.next()).done;) { _arr.push(_step.value); if (i && _arr.length === i) break; } return _arr; } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

var Maze = _interopRequire(require("./maze"));

var random = _interopRequire(require("./random"));

var App = (function () {
	function App() {
		var _this = this;
		_classCallCheck(this, App);

		this.$width = document.querySelector("#width");
		this.$height = document.querySelector("#height");
		this.$permalink = document.querySelector("#permalink");
		this.$canvas = document.querySelector("#canvas");

		document.querySelector("#generate").addEventListener("click", function (event) {
			event.preventDefault();
			_this.generate();
		});

		document.body.addEventListener("keyup", function (event) {
			var key = event.key || event.charCode || event.keyCode;
			var direction = ["west", "north", "east", "south"][key - 37];
			if (!direction) return;

			event.preventDefault();
			_this.maze.move(direction);
		});

		this.$canvas.addEventListener("mousemove", function (event) {
			_this.maze.hover(event.layerX, event.layerY);
		});

		// Attempt to read maze parameters from URL hash
		var _dXDSDD$exec = /#(\d+)x(\d+)(?:s(\d+.\d+))?|.*/.exec(window.location.hash);

		var _dXDSDD$exec2 = _slicedToArray(_dXDSDD$exec, 4);

		var width = _dXDSDD$exec2[1];
		var height = _dXDSDD$exec2[2];
		var seed = _dXDSDD$exec2[3];


		if (width && height) {
			this.width = width;
			this.height = height;
		}

		if (seed) {
			random.seed = parseFloat(seed);
		}

		this.generate();
	}

	_prototypeProperties(App, null, {
		width: {
			get: function () {
				return +this.$width.value;
			},
			set: function (value) {
				this.$width.value = value;
			},
			configurable: true
		},
		height: {
			get: function () {
				return +this.$height.value;
			},
			set: function (value) {
				this.$height.value = value;
			},
			configurable: true
		},
		generate: {
			value: function generate() {
				this.setPermalink();

				this.maze = new Maze(this.width, this.height);
				this.maze.render(this.$canvas);
			},
			writable: true,
			configurable: true
		},
		setPermalink: {
			value: function setPermalink() {
				var hash = "#" + this.width + "x" + this.height + "s" + random.seed;
				var href = window.location.href.split("#")[0] + hash;
				window.location.hash = hash;
				this.$permalink.setAttribute("href", href);
			},
			writable: true,
			configurable: true
		}
	});

	return App;
})();

new App();

},{"./maze":3,"./random":4}],2:[function(require,module,exports){
"use strict";

var Grid = function ($el) {
	var SIZE = 20; // Width of square in pixels
	var WEIGHT = 2; // Width of line in pixels

	var ctx = $el.getContext("2d");

	function pixelHeight(val) {
		if (arguments.length > 0) {
			ctx.canvas.height = val;
		}
		return ctx.canvas.height;
	}

	function pixelWidth(val) {
		if (arguments.length > 0) {
			ctx.canvas.width = val;
		}
		return ctx.canvas.width;
	}

	function gridHeight(squares) {
		if (arguments.length > 0) {
			pixelHeight(squares * SIZE + (squares + 1) * WEIGHT);
		}
		return (pixelHeight() - WEIGHT) / (SIZE + WEIGHT);
	}

	function gridWidth(squares) {
		if (arguments.length > 0) {
			pixelWidth(squares * SIZE + (squares + 1) * WEIGHT);
		}
		return (pixelWidth() - WEIGHT) / (SIZE + WEIGHT);
	}

	function toPixels(sq) {
		return WEIGHT / 2 + sq * (WEIGHT + SIZE);
	}

	function mod(a, b) {
		return (a % b + b) % b;
	}

	function toSquares(px) {
		if (mod(px - WEIGHT, SIZE + WEIGHT) >= SIZE - WEIGHT) {
			// On a line
			return null;
		}
		return Math.floor((px - WEIGHT) / (SIZE + WEIGHT));
	}

	function clear() {
		ctx.clearRect(0, 0, pixelWidth(), pixelHeight());
	}

	function fill(x, y, color) {
		var _fillStyle = ctx.fillStyle;
		ctx.fillStyle = color;

		ctx.fillRect(toPixels(x) + WEIGHT / 2, toPixels(y) + WEIGHT / 2, SIZE, SIZE);

		ctx.fillStyle = _fillStyle;
	}

	function bridge(x1, y1, x2, y2, color) {
		if (Math.abs(x2 - x1) + Math.abs(y2 - y1) !== 1) {
			throw new Error("Squares are not adjacent.");
		}

		var x = Math.max(x1, x2),
		    y = Math.max(y1, y2);

		var _lineCap = ctx.lineCap;
		var _lineWidth = ctx.lineWidth;
		var _strokeStyle = ctx.strokeStyle;
		ctx.lineCap = "square";
		ctx.lineWidth = WEIGHT;
		ctx.strokeStyle = color;

		ctx.beginPath();
		if (x1 === x2) {
			// Bridge north/south squares
			// Narrower x dimensions
			ctx.moveTo(toPixels(x1) + WEIGHT, toPixels(y));
			ctx.lineTo(toPixels(x1 + 1) - WEIGHT, toPixels(y));
		} else {
			// Bridge east/west squares
			// Narrower y dimensions
			ctx.moveTo(toPixels(x), toPixels(y1) + WEIGHT);
			ctx.lineTo(toPixels(x), toPixels(y1 + 1) - WEIGHT);
		}
		ctx.stroke();

		ctx.lineCap = _lineCap;
		ctx.lineWidth = _lineWidth;
		ctx.strokeStyle = _strokeStyle;
	}

	function line(x1, y1, x2, y2) {
		var _lineCap = ctx.lineCap;
		var _lineWidth = ctx.lineWidth;
		var _strokeStyle = ctx.strokeStyle;
		ctx.lineCap = "round";
		ctx.lineWidth = WEIGHT;
		ctx.strokeStyle = "#16191d";

		ctx.beginPath();
		ctx.moveTo(toPixels(x1), toPixels(y1));
		ctx.lineTo(toPixels(x2), toPixels(y2));
		ctx.stroke();

		ctx.lineCap = _lineCap;
		ctx.lineWidth = _lineWidth;
		ctx.strokeStyle = _strokeStyle;
	}

	return {
		height: gridHeight,
		width: gridWidth,
		pixelHeight: pixelHeight,
		pixelWidth: pixelWidth,
		clear: clear,
		fill: fill,
		bridge: bridge,
		line: line,
		toPixels: toPixels,
		toSquares: toSquares
	};
};

module.exports = Grid;

},{}],3:[function(require,module,exports){
"use strict";

var Grid = require("./grid");
var random = require("./random");

var Maze = function (width, height) {
	var DIRECTIONS = ["north", "south", "east", "west"];
	var GREEN = "#4ecdc4",
	    RED = "#ff6b6b";

	var path = [];
	var maze, grid;

	function randomInt(max) {
		return Math.floor(random() * max);
	}

	function randomElement(arr) {
		return arr[randomInt(arr.length)];
	}

	function lastElement(arr) {
		return arr[arr.length - 1];
	}

	/**
  * Gets the coordinates of an adjacent square.
  * @param {object} start Starting square's coordinates.
  * @param {string} direction Cardinal direction of adjacent square.
  * @returns {object} Adjacent square's coordinates.
  */
	function adjacentSquare(start, direction) {
		switch (direction) {
			case "north":
				return start.y > 0 ? { x: start.x, y: start.y - 1 } : null;
			case "south":
				return start.y < height - 1 ? { x: start.x, y: start.y + 1 } : null;
			case "east":
				return start.x < width - 1 ? { x: start.x + 1, y: start.y } : null;
			case "west":
				return start.x > 0 ? { x: start.x - 1, y: start.y } : null;
			default:
				throw new Exception("Invalid direction " + dir);
		}
	}

	/**
  * Gets the coordinates of all squares adjacent to a given square.
  * @param {object} start Coordinates of the starting square.
  * @returns {object} Coordinates of adjacent squares in each direction.
  */
	function adjacentSquares(start) {
		return DIRECTIONS.reduce(function (obj, dir) {
			obj[dir] = adjacentSquare(start, dir);
			return obj;
		}, {});
	}

	/**
  * Gets the relative direction between two adjacent squares.
  * @param {object} start The starting square.
  * @param {object} end The ending square.
  * @returns {strign} Cardinal direction from start to end.
  */
	function relativeDirection(start, end) {
		if (Math.abs(end.x - start.x) + Math.abs(end.y - start.y) > 1) {
			// Squares are not adjacent
			return null;
		}

		if (start.x < end.x) {
			return "east";
		} else if (end.x < start.x) {
			return "west";
		} else if (start.y < end.y) {
			return "south";
		} else if (end.y < start.y) {
			return "north";
		}
	}

	function generate() {
		var mesh = [];
		var edges = [];
		var length = 0;
		var x, y;
		var start, end;

		function getSquare(square) {
			return mesh[square.x][square.y];
		}

		function isolated(square) {
			square = getSquare(square);
			return DIRECTIONS.every(function (dir) {
				return square[dir] !== true;
			});
		}

		function connect(a, b) {
			//console.log(['CONNECTING (',a.x,',',a.y,') and (',b.x,',',b.y,').'].join(''));
			mesh[a.x][a.y][relativeDirection(a, b)] = true;
			mesh[b.x][b.y][relativeDirection(b, a)] = true;
		}

		function openEdge(square) {
			var x = square.x;
			var y = square.y;
			if (x === 0) {
				mesh[x][y].west = true;
			} else if (y === 0) {
				mesh[x][y].north = true;
			} else if (x === width - 1) {
				mesh[x][y].east = true;
			} else if (y === height - 1) {
				mesh[x][y].south = true;
			} else {
				throw new Error("Destination not on edge.");
			}
		}

		function search(pos) {
			var adjacencies, options, heading, next;

			if (pos.x === end.x && pos.y === end.y) {
				openEdge(pos);
				console.log("LENGTH", length);
				return;
			}

			adjacencies = adjacentSquares(pos);

			while (1) {
				options = Object.keys(adjacencies).filter(function (dir) {
					return adjacencies[dir];
				}).filter(function (dir) {
					return isolated(adjacentSquare(pos, dir));
				});
				if (!options.length) break;

				heading = randomElement(options);
				next = adjacencies[heading];
				connect(pos, next);
				length++;
				search(next);
				length--;
			}
		}

		for (x = 0; x < width; x++) {
			mesh[x] = [];
			for (y = 0; y < height; y++) {
				if (x === 0 || y === 0 || x === width - 1 || y === height - 1) {
					edges.push({ x: x, y: y });
				}

				mesh[x][y] = {
					north: 0 < y ? false : null,
					south: y < height - 1 ? false : null,
					west: 0 < x ? false : null,
					east: x < width - 1 ? false : null
				};
			}
		}

		start = randomElement(edges);
		path.push(start);
		do {
			end = randomElement(edges);
		} while (start.x === end.x || start.y === end.y);

		openEdge(start);
		search(start);

		return {
			mesh: mesh,
			start: start,
			end: end
		};
	}

	function bridgeEdge(square, color) {
		if (square.x === 0) {
			// West
			grid.bridge(square.x - 1, square.y, square.x, square.y, color);
		} else if (square.y === 0) {
			// North
			grid.bridge(square.x, square.y - 1, square.x, square.y, color);
		} else if (square.x === width - 1) {
			// East
			grid.bridge(square.x, square.y, square.x + 1, square.y, color);
		} else if (square.y === height - 1) {
			// South
			grid.bridge(square.x, square.y, square.x, square.y + 1, color);
		} else {
			throw new Error("Square is not on edge.");
		}
	}

	function render($el) {
		var x, y;

		grid = new Grid($el);
		grid.clear();
		grid.width(width);
		grid.height(height);

		for (x = 0; x < width; x++) {
			for (y = 0; y < height; y++) {
				if (!maze.mesh[x][y].west) {
					grid.line(x, y, x, y + 1);
				}
				if (!maze.mesh[x][y].north) {
					grid.line(x, y, x + 1, y);
				}

				// Only need to draw south and east on edges
				if (x === width - 1 && !maze.mesh[x][y].east) {
					grid.line(x + 1, y, x + 1, y + 1);
				}
				if (y === height - 1 && !maze.mesh[x][y].south) {
					grid.line(x, y + 1, x + 1, y + 1);
				}
			}
		}

		grid.fill(maze.start.x, maze.start.y, GREEN);
		grid.fill(maze.end.x, maze.end.y, RED);
		bridgeEdge(maze.start, GREEN);
		bridgeEdge(maze.end, RED);
	}

	function move(dir) {
		var pos = lastElement(path);
		var previous = path[path.length - 2];
		var next;

		// Don't break down walls
		if (!maze.mesh[pos.x][pos.y][dir]) {
			return false;
		}next = adjacentSquare(pos, dir);
		if (!next) {
			return false;
		}if (previous && next.x === previous.x && next.y === previous.y) {
			grid.bridge(pos.x, pos.y, next.x, next.y, RED);
			grid.fill(pos.x, pos.y, RED);
			path.pop();
		} else {
			grid.bridge(pos.x, pos.y, next.x, next.y, GREEN);
			grid.fill(next.x, next.y, GREEN);
			path.push(next);
		}

		if (next.x === maze.end.x && next.y === maze.end.y) {
			bridgeEdge(next, GREEN);
			return true;
		}
		return false;
	}

	function enterSquare(square) {
		var pos = lastElement(path);
		var dir = relativeDirection(pos, square);
		if (dir) move(dir);
	}

	var hover = (function () {
		var _x, _y;

		return function (x, y) {
			x = grid.toSquares(x);
			y = grid.toSquares(y);
			if (x !== null && y !== null && (x !== _x || y !== _y)) {
				_x = x;
				_y = y;
				enterSquare({ x: x, y: y });
			}
		};
	})();

	maze = generate();

	return {
		render: render,
		move: move,
		hover: hover
	};
};

module.exports = Maze;

},{"./grid":2,"./random":4}],4:[function(require,module,exports){
"use strict";

module.exports = random;
function random() {
	var x = Math.sin(random.seed++) * 10000;
	return x - Math.floor(x);
}

random.seed = Math.random();

},{}]},{},[1])


//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvYXBwLmpzIiwic3JjL2dyaWQuanMiLCJzcmMvbWF6ZS5qcyIsInNyYy9yYW5kb20uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7O0lDQU8sSUFBSSwyQkFBTSxRQUFROztJQUNsQixNQUFNLDJCQUFNLFVBQVU7O0lBRXZCLEdBQUc7QUFPRyxVQVBOLEdBQUc7O3dCQUFILEdBQUc7O0FBUVAsTUFBSSxDQUFDLE1BQU0sR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQy9DLE1BQUksQ0FBQyxPQUFPLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUNqRCxNQUFJLENBQUMsVUFBVSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDdkQsTUFBSSxDQUFDLE9BQU8sR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQyxDQUFDOztBQUVqRCxVQUFRLENBQUMsYUFBYSxDQUFDLFdBQVcsQ0FBQyxDQUNqQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsVUFBQyxLQUFLLEVBQUs7QUFDckMsUUFBSyxDQUFDLGNBQWMsRUFBRSxDQUFDO0FBQ3ZCLFNBQUssUUFBUSxFQUFFLENBQUM7R0FDaEIsQ0FBQyxDQUFDOztBQUVKLFVBQVEsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLFVBQUMsS0FBSyxFQUFLO0FBQ2xELE9BQUksR0FBRyxHQUFHLEtBQUssQ0FBQyxHQUFHLElBQUksS0FBSyxDQUFDLFFBQVEsSUFBSSxLQUFLLENBQUMsT0FBTyxDQUFDO0FBQ3ZELE9BQUksU0FBUyxHQUFHLENBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQyxD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QUMsS0FBSyxDQUFDLEVBQUU7O0FBQ25CLE9BQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7R0FDL0QsTUFBTSxJQUFJLE1BQU0sQ0FBQyxDQUFDLEtBQUssQ0FBQyxFQUFFOztBQUMxQixPQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO0dBQy9ELE1BQU0sSUFBSSxNQUFNLENBQUMsQ0FBQyxLQUFNLEtBQUssR0FBRyxDQUFDLEFBQUMsRUFBRTs7QUFDcEMsT0FBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztHQUMvRCxNQUFNLElBQUksTUFBTSxDQUFDLENBQUMsS0FBTSxNQUFNLEdBQUcsQ0FBQyxBQUFDLEVBQUU7O0FBQ3JDLE9BQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7R0FDL0QsTUFBTTtBQUNOLFNBQU0sSUFBSSxLQUFLLENBQUMsd0JBQXdCLENBQUMsQ0FBQztHQUMxQztFQUNEOztBQUVELFVBQVMsTUFBTSxDQUFDLEdBQUcsRUFBRTtBQUNwQixNQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7O0FBRVQsTUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ3JCLE1BQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztBQUNiLE1BQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDbEIsTUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQzs7QUFFcEIsT0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxLQUFLLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDM0IsUUFBSyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDNUIsUUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFO0FBQzFCLFNBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0tBQzFCO0FBQ0QsUUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFO0FBQzNCLFNBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0tBQzFCOzs7QUFHRCxRQUFJLENBQUMsS0FBSyxLQUFLLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUU7QUFDN0MsU0FBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztLQUNsQztBQUNELFFBQUksQ0FBQyxLQUFLLE1BQU0sR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRTtBQUMvQyxTQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0tBQ2xDO0lBQ0Q7R0FDRDs7QUFFRCxNQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQzdDLE1BQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDdkMsWUFBVSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDOUIsWUFBVSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7RUFDMUI7O0FBRUQsVUFBUyxJQUFJLENBQUMsR0FBRyxFQUFFO0FBQ2xCLE1BQUksR0FBRyxHQUFHLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUM1QixNQUFJLFFBQVEsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztBQUNyQyxNQUFJLElBQUksQ0FBQzs7O0FBR1QsTUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7QUFBRSxVQUFPLEtBQUssQ0FBQztHQUFBLEFBRWhELElBQUksR0FBRyxjQUFjLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBQ2hDLE1BQUksQ0FBQyxJQUFJO0FBQUUsVUFBTyxLQUFLLENBQUM7R0FBQSxBQUV4QixJQUFJLFFBQVEsSUFBSSxJQUFJLENBQUMsQ0FBQyxLQUFLLFFBQVEsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsS0FBSyxRQUFRLENBQUMsQ0FBQyxFQUFFO0FBQy9ELE9BQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUMvQyxPQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUM3QixPQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7R0FDWCxNQUFNO0FBQ04sT0FBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQ2pELE9BQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQ2pDLE9BQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7R0FDaEI7O0FBRUQsTUFBSSxJQUFJLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUU7QUFDbkQsYUFBVSxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztBQUN4QixVQUFPLElBQUksQ0FBQztHQUNaO0FBQ0QsU0FBTyxLQUFLLENBQUM7RUFDYjs7QUFFRCxVQUFTLFdBQVcsQ0FBQyxNQUFNLEVBQUU7QUFDNUIsTUFBSSxHQUFHLEdBQUcsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQzVCLE1BQUksR0FBRyxHQUFHLGlCQUFpQixDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsQ0FBQztBQUN6QyxNQUFJLEdBQUcsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7RUFDbkI7O0FBRUQsS0FBSSxLQUFLLEdBQUcsQ0FBQyxZQUFZO0FBQ3hCLE1BQUksRUFBRSxFQUFFLEVBQUUsQ0FBQzs7QUFFWCxTQUFPLFVBQVUsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUN0QixJQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN0QixJQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUN0QixPQUFJLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxLQUFLLElBQUksS0FBSyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUEsQUFBQyxFQUFFO0FBQ3ZELE1BQUUsR0FBRyxDQUFDLENBQUM7QUFDUCxNQUFFLEdBQUcsQ0FBQyxDQUFDO0FBQ1AsZUFBVyxDQUFDLEVBQUMsQ0FBQyxFQUFELENBQUMsRUFBRSxDQUFDLEVBQUQsQ0FBQyxFQUFDLENBQUMsQ0FBQztJQUNwQjtHQUNELENBQUM7RUFFRixDQUFBLEVBQUcsQ0FBQzs7QUFFTCxLQUFJLEdBQUcsUUFBUSxFQUFFLENBQUM7O0FBRWxCLFFBQU87QUFDTixRQUFNLEVBQU4sTUFBTTtBQUNOLE1BQUksRUFBSixJQUFJO0FBQ0osT0FBSyxFQUFMLEtBQUs7RUFDTCxDQUFDO0NBRUYsQ0FBQTs7QUFFRCxNQUFNLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQzs7Ozs7aUJDcFNFLE1BQU07QUFBZixTQUFTLE1BQU0sR0FBRztBQUNoQyxLQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQyxHQUFHLEtBQUssQ0FBQztBQUN4QyxRQUFPLENBQUMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0NBQ3pCOztBQUVELE1BQU0sQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZVJvb3QiOiIvanN4Iiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJpbXBvcnQgTWF6ZSBmcm9tICcuL21hemUnO1xuaW1wb3J0IHJhbmRvbSBmcm9tICcuL3JhbmRvbSc7XG5cbmNsYXNzIEFwcCB7XG5cdGdldCB3aWR0aCgpIHsgcmV0dXJuICt0aGlzLiR3aWR0aC52YWx1ZTsgfVxuXHRzZXQgd2lkdGgodmFsdWUpIHsgdGhpcy4kd2lkdGgudmFsdWUgPSB2YWx1ZTsgfVxuXG5cdGdldCBoZWlnaHQoKSB7IHJldHVybiArdGhpcy4kaGVpZ2h0LnZhbHVlOyB9XG5cdHNldCBoZWlnaHQodmFsdWUpIHsgdGhpcy4kaGVpZ2h0LnZhbHVlID0gdmFsdWU7IH1cblxuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHR0aGlzLiR3aWR0aCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN3aWR0aCcpO1xuXHRcdHRoaXMuJGhlaWdodCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNoZWlnaHQnKTtcblx0XHR0aGlzLiRwZXJtYWxpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGVybWFsaW5rJyk7XG5cdFx0dGhpcy4kY2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NhbnZhcycpO1xuXG5cdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2dlbmVyYXRlJylcblx0XHRcdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHR0aGlzLmdlbmVyYXRlKCk7XG5cdFx0XHR9KTtcblxuXHRcdGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoZXZlbnQpID0+IHtcblx0XHRcdGxldCBrZXkgPSBldmVudC5rZXkgfHwgZXZlbnQuY2hhckNvZGUgfHwgZXZlbnQua2V5Q29kZTtcblx0XHRcdGxldCBkaXJlY3Rpb24gPSBbJ3dlc3QnLCAnbm9ydGgnLCAnZWFzdCcsICdzb3V0aCddW2tleSAtIDM3XTtcblx0XHRcdGlmICghZGlyZWN0aW9uKSByZXR1cm47XG5cblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHR0aGlzLm1hemUubW92ZShkaXJlY3Rpb24pO1xuXHRcdH0pO1xuXG5cdFx0dGhpcy4kY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIChldmVudCkgPT4ge1xuXHRcdFx0dGhpcy5tYXplLmhvdmVyKGV2ZW50LmxheWVyWCwgZXZlbnQubGF5ZXJZKTtcblx0XHR9KTtcblxuXHRcdC8vIEF0dGVtcHQgdG8gcmVhZCBtYXplIHBhcmFtZXRlcnMgZnJvbSBVUkwgaGFzaFxuXHRcdGxldCBbLCB3aWR0aCwgaGVpZ2h0LCBzZWVkXSA9IC8jKFxcZCspeChcXGQrKSg/OnMoXFxkKy5cXGQrKSk/fC4qL1xuXHRcdFx0LmV4ZWMod2luZG93LmxvY2F0aW9uLmhhc2gpO1xuXG5cdFx0aWYgKHdpZHRoICYmIGhlaWdodCkge1xuXHRcdFx0dGhpcy53aWR0aCA9IHdpZHRoO1xuXHRcdFx0dGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG5cdFx0fVxuXG5cdFx0aWYgKHNlZWQpIHtcblx0XHRcdHJhbmRvbS5zZWVkID0gcGFyc2VGbG9hdChzZWVkKTtcblx0XHR9XG5cblx0XHR0aGlzLmdlbmVyYXRlKCk7XG5cdH1cblxuXHRnZW5lcmF0ZSgpIHtcblx0XHR0aGlzLnNldFBlcm1hbGluaygpO1xuXG5cdFx0dGhpcy5tYXplID0gbmV3IE1hemUodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuXHRcdHRoaXMubWF6ZS5yZW5kZXIodGhpcy4kY2FudmFzKTtcblx0fVxuXG5cdHNldFBlcm1hbGluaygpIHtcblx0XHRsZXQgaGFzaCA9IGAjJHt0aGlzLndpZHRofXgke3RoaXMuaGVpZ2h0fXMke3JhbmRvbS5zZWVkfWA7XG5cdFx0bGV0IGhyZWYgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5zcGxpdCgnIycpWzBdICsgaGFzaDtcblx0XHR3aW5kb3cubG9jYXRpb24uaGFzaCA9IGhhc2g7XG5cdFx0dGhpcy4kcGVybWFsaW5rLnNldEF0dHJpYnV0ZSgnaHJlZicsIGhyZWYpO1xuXHR9XG59XG5cbm5ldyBBcHAoKTtcbiIsInZhciBHcmlkID0gZnVuY3Rpb24gKCRlbCkge1xuXG5cdHZhciBTSVpFID0gMjA7IC8vIFdpZHRoIG9mIHNxdWFyZSBpbiBwaXhlbHNcblx0dmFyIFdFSUdIVCA9IDI7IC8vIFdpZHRoIG9mIGxpbmUgaW4gcGl4ZWxzXG5cblx0dmFyIGN0eCA9ICRlbC5nZXRDb250ZXh0KCcyZCcpO1xuXG5cdGZ1bmN0aW9uIHBpeGVsSGVpZ2h0KHZhbCkge1xuXHRcdGlmIChhcmd1bWVudHMubGVuZ3RoID4gMCkge1xuXHRcdFx0Y3R4LmNhbnZhcy5oZWlnaHQgPSB2YWw7XG5cdFx0fVxuXHRcdHJldHVybiBjdHguY2FudmFzLmhlaWdodDtcblx0fVxuXG5cdGZ1bmN0aW9uIHBpeGVsV2lkdGgodmFsKSB7XG5cdFx0aWYgKGFyZ3VtZW50cy5sZW5ndGggPiAwKSB7XG5cdFx0XHRjdHguY2FudmFzLndpZHRoID0gdmFsO1xuXHRcdH1cblx0XHRyZXR1cm4gY3R4LmNhbnZhcy53aWR0aDtcblx0fVxuXG5cdGZ1bmN0aW9uIGdyaWRIZWlnaHQoc3F1YXJlcykge1xuXHRcdGlmIChhcmd1bWVudHMubGVuZ3RoID4gMCkge1xuXHRcdFx0cGl4ZWxIZWlnaHQoc3F1YXJlcyAqIFNJWkUgKyAoc3F1YXJlcyArIDEpICogV0VJR0hUKTtcblx0XHR9XG5cdFx0cmV0dXJuIChwaXhlbEhlaWdodCgpIC0gV0VJR0hUKSAvIChTSVpFICsgV0VJR0hUKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdyaWRXaWR0aChzcXVhcmVzKSB7XG5cdFx0aWYgKGFyZ3VtZW50cy5sZW5ndGggPiAwKSB7XG5cdFx0XHRwaXhlbFdpZHRoKHNxdWFyZXMgKiBTSVpFICsgKHNxdWFyZXMgKyAxKSAqIFdFSUdIVCk7XG5cdFx0fVxuXHRcdHJldHVybiAocGl4ZWxXaWR0aCgpIC0gV0VJR0hUKSAvIChTSVpFICsgV0VJR0hUKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHRvUGl4ZWxzKHNxKSB7XG5cdFx0cmV0dXJuIChXRUlHSFQgLyAyKSArIHNxICogKFdFSUdIVCArIFNJWkUpO1xuXHR9XG5cblx0ZnVuY3Rpb24gbW9kKGEsIGIpIHtcblx0XHRyZXR1cm4gKChhICUgYikgKyBiKSAlIGI7XG5cdH1cblxuXHRmdW5jdGlvbiB0b1NxdWFyZXMocHgpIHtcblx0XHRpZiAobW9kKHB4IC0gV0VJR0hULCBTSVpFICsgV0VJR0hUKSA+PSAoU0laRSAtIFdFSUdIVCkpIHtcblx0XHRcdC8vIE9uIGEgbGluZVxuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXHRcdHJldHVybiBNYXRoLmZsb29yKChweCAtIFdFSUdIVCkgLyAoU0laRSArIFdFSUdIVCkpO1xuXHR9XG5cblx0ZnVuY3Rpb24gY2xlYXIoKSB7XG5cdFx0Y3R4LmNsZWFyUmVjdCgwLCAwLCBwaXhlbFdpZHRoKCksIHBpeGVsSGVpZ2h0KCkpO1xuXHR9XG5cblx0ZnVuY3Rpb24gZmlsbCh4LCB5LCBjb2xvcikge1xuXHRcdHZhciBfZmlsbFN0eWxlID0gY3R4LmZpbGxTdHlsZTtcblx0XHRjdHguZmlsbFN0eWxlID0gY29sb3I7XG5cblx0XHRjdHguZmlsbFJlY3QoXG5cdFx0XHR0b1BpeGVscyh4KSArIChXRUlHSFQgLyAyKSxcblx0XHRcdHRvUGl4ZWxzKHkpICsgKFdFSUdIVCAvIDIpLFxuXHRcdFx0U0laRSwgU0laRVxuXHRcdCk7XG5cblx0XHRjdHguZmlsbFN0eWxlID0gX2ZpbGxTdHlsZTtcblx0fVxuXG5cdGZ1bmN0aW9uIGJyaWRnZSh4MSwgeTEsIHgyLCB5MiwgY29sb3IpIHtcblx0XHRpZiAoTWF0aC5hYnMoeDIgLSB4MSkgKyBNYXRoLmFicyh5MiAtIHkxKSAhPT0gMSkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdTcXVhcmVzIGFyZSBub3QgYWRqYWNlbnQuJyk7XG5cdFx0fVxuXG5cdFx0dmFyIHggPSBNYXRoLm1heCh4MSwgeDIpLCB5ID0gTWF0aC5tYXgoeTEsIHkyKTtcblxuXHRcdHZhciBfbGluZUNhcCAgICAgPSBjdHgubGluZUNhcDtcblx0XHR2YXIgX2xpbmVXaWR0aCAgID0gY3R4LmxpbmVXaWR0aDtcblx0XHR2YXIgX3N0cm9rZVN0eWxlID0gY3R4LnN0cm9rZVN0eWxlO1xuXHRcdGN0eC5saW5lQ2FwICAgICAgPSAnc3F1YXJlJztcblx0XHRjdHgubGluZVdpZHRoICAgID0gV0VJR0hUO1xuXHRcdGN0eC5zdHJva2VTdHlsZSAgPSBjb2xvcjtcblxuXHRcdGN0eC5iZWdpblBhdGgoKTtcblx0XHRpZiAoeDEgPT09IHgyKSB7XG5cdFx0XHQvLyBCcmlkZ2Ugbm9ydGgvc291dGggc3F1YXJlc1xuXHRcdFx0Ly8gTmFycm93ZXIgeCBkaW1lbnNpb25zXG5cdFx0XHRjdHgubW92ZVRvKHRvUGl4ZWxzKHgxKSArIFdFSUdIVCwgdG9QaXhlbHMoeSkpO1xuXHRcdFx0Y3R4LmxpbmVUbyh0b1BpeGVscyh4MSArIDEpIC0gV0VJR0hULCB0b1BpeGVscyh5KSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIEJyaWRnZSBlYXN0L3dlc3Qgc3F1YXJlc1xuXHRcdFx0Ly8gTmFycm93ZXIgeSBkaW1lbnNpb25zXG5cdFx0XHRjdHgubW92ZVRvKHRvUGl4ZWxzKHgpLCB0b1BpeGVscyh5MSkgKyBXRUlHSFQpO1xuXHRcdFx0Y3R4LmxpbmVUbyh0b1BpeGVscyh4KSwgdG9QaXhlbHMoeTEgKyAxKSAtIFdFSUdIVCk7XG5cdFx0fVxuXHRcdGN0eC5zdHJva2UoKTtcblxuXHRcdGN0eC5saW5lQ2FwICAgICA9IF9saW5lQ2FwO1xuXHRcdGN0eC5saW5lV2lkdGggICA9IF9saW5lV2lkdGg7XG5cdFx0Y3R4LnN0cm9rZVN0eWxlID0gX3N0cm9rZVN0eWxlO1xuXHR9XG5cblx0ZnVuY3Rpb24gbGluZSh4MSwgeTEsIHgyLCB5Mikge1xuXHRcdHZhciBfbGluZUNhcCAgICAgPSBjdHgubGluZUNhcDtcblx0XHR2YXIgX2xpbmVXaWR0aCAgID0gY3R4LmxpbmVXaWR0aDtcblx0XHR2YXIgX3N0cm9rZVN0eWxlID0gY3R4LnN0cm9rZVN0eWxlO1xuXHRcdGN0eC5saW5lQ2FwICAgICAgPSAncm91bmQnO1xuXHRcdGN0eC5saW5lV2lkdGggICAgPSBXRUlHSFQ7XG5cdFx0Y3R4LnN0cm9rZVN0eWxlICA9ICcjMTYxOTFkJztcblxuXHRcdGN0eC5iZWdpblBhdGgoKTtcblx0XHRjdHgubW92ZVRvKHRvUGl4ZWxzKHgxKSwgdG9QaXhlbHMoeTEpKTtcblx0XHRjdHgubGluZVRvKHRvUGl4ZWxzKHgyKSwgdG9QaXhlbHMoeTIpKTtcblx0XHRjdHguc3Ryb2tlKCk7XG5cblx0XHRjdHgubGluZUNhcCAgICAgPSBfbGluZUNhcDtcblx0XHRjdHgubGluZVdpZHRoICAgPSBfbGluZVdpZHRoO1xuXHRcdGN0eC5zdHJva2VTdHlsZSA9IF9zdHJva2VTdHlsZTtcblx0fVxuXG5cdHJldHVybiB7XG5cdFx0aGVpZ2h0OiBncmlkSGVpZ2h0LFxuXHRcdHdpZHRoOiBncmlkV2lkdGgsXG5cdFx0cGl4ZWxIZWlnaHQsXG5cdFx0cGl4ZWxXaWR0aCxcblx0XHRjbGVhcixcblx0XHRmaWxsLFxuXHRcdGJyaWRnZSxcblx0XHRsaW5lLFxuXHRcdHRvUGl4ZWxzLFxuXHRcdHRvU3F1YXJlc1xuXHR9O1xuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEdyaWQ7XG4iLCJ2YXIgR3JpZCA9IHJlcXVpcmUoJy4vZ3JpZCcpO1xudmFyIHJhbmRvbSA9IHJlcXVpcmUoJy4vcmFuZG9tJyk7XG5cbnZhciBNYXplID0gZnVuY3Rpb24gKHdpZHRoLCBoZWlnaHQpIHtcblxuXHR2YXIgRElSRUNUSU9OUyA9IFsnbm9ydGgnLCAnc291dGgnLCAnZWFzdCcsICd3ZXN0J107XG5cdHZhciBHUkVFTiA9ICcjNGVjZGM0JywgUkVEID0gJyNmZjZiNmInO1xuXG5cdHZhciBwYXRoID0gW107XG5cdHZhciBtYXplLCBncmlkO1xuXG5cdGZ1bmN0aW9uIHJhbmRvbUludChtYXgpIHtcblx0XHRyZXR1cm4gTWF0aC5mbG9vcihyYW5kb20oKSAqIG1heCk7XG5cdH1cblxuXHRmdW5jdGlvbiByYW5kb21FbGVtZW50KGFycikge1xuXHRcdHJldHVybiBhcnJbcmFuZG9tSW50KGFyci5sZW5ndGgpXTtcblx0fVxuXG5cdGZ1bmN0aW9uIGxhc3RFbGVtZW50KGFycikge1xuXHRcdHJldHVybiBhcnJbYXJyLmxlbmd0aCAtIDFdO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdldHMgdGhlIGNvb3JkaW5hdGVzIG9mIGFuIGFkamFjZW50IHNxdWFyZS5cblx0ICogQHBhcmFtIHtvYmplY3R9IHN0YXJ0IFN0YXJ0aW5nIHNxdWFyZSdzIGNvb3JkaW5hdGVzLlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gZGlyZWN0aW9uIENhcmRpbmFsIGRpcmVjdGlvbiBvZiBhZGphY2VudCBzcXVhcmUuXG5cdCAqIEByZXR1cm5zIHtvYmplY3R9IEFkamFjZW50IHNxdWFyZSdzIGNvb3JkaW5hdGVzLlxuXHQgKi9cblx0ZnVuY3Rpb24gYWRqYWNlbnRTcXVhcmUoc3RhcnQsIGRpcmVjdGlvbikge1xuXHRcdHN3aXRjaCAoZGlyZWN0aW9uKSB7XG5cdFx0XHRjYXNlICdub3J0aCc6XG5cdFx0XHRcdHJldHVybiBzdGFydC55ID4gMFxuXHRcdFx0XHRcdD8geyB4OiBzdGFydC54LCB5OiBzdGFydC55IC0gMSB9XG5cdFx0XHRcdFx0OiBudWxsO1xuXHRcdFx0Y2FzZSAnc291dGgnOlxuXHRcdFx0XHRyZXR1cm4gc3RhcnQueSA8IGhlaWdodCAtIDFcblx0XHRcdFx0XHQ/IHsgeDogc3RhcnQueCwgeTogc3RhcnQueSArIDEgfVxuXHRcdFx0XHRcdDogbnVsbDtcblx0XHRcdGNhc2UgJ2Vhc3QnOlxuXHRcdFx0XHRyZXR1cm4gc3RhcnQueCA8IHdpZHRoIC0gMVxuXHRcdFx0XHRcdD8geyB4OiBzdGFydC54ICsgMSwgeTogc3RhcnQueSB9XG5cdFx0XHRcdFx0OiBudWxsO1xuXHRcdFx0Y2FzZSAnd2VzdCc6XG5cdFx0XHRcdHJldHVybiBzdGFydC54ID4gMFxuXHRcdFx0XHRcdD8geyB4OiBzdGFydC54IC0gMSwgeTogc3RhcnQueSB9XG5cdFx0XHRcdFx0OiBudWxsO1xuXHRcdFx0ZGVmYXVsdDogdGhyb3cgbmV3IEV4Y2VwdGlvbignSW52YWxpZCBkaXJlY3Rpb24gJyArIGRpcik7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEdldHMgdGhlIGNvb3JkaW5hdGVzIG9mIGFsbCBzcXVhcmVzIGFkamFjZW50IHRvIGEgZ2l2ZW4gc3F1YXJlLlxuXHQgKiBAcGFyYW0ge29iamVjdH0gc3RhcnQgQ29vcmRpbmF0ZXMgb2YgdGhlIHN0YXJ0aW5nIHNxdWFyZS5cblx0ICogQHJldHVybnMge29iamVjdH0gQ29vcmRpbmF0ZXMgb2YgYWRqYWNlbnQgc3F1YXJlcyBpbiBlYWNoIGRpcmVjdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIGFkamFjZW50U3F1YXJlcyhzdGFydCkge1xuXHRcdHJldHVybiBESVJFQ1RJT05TLnJlZHVjZSgob2JqLCBkaXIpID0+IHtcblx0XHRcdG9ialtkaXJdID0gYWRqYWNlbnRTcXVhcmUoc3RhcnQsIGRpcik7XG5cdFx0XHRyZXR1cm4gb2JqO1xuXHRcdH0sIHt9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBHZXRzIHRoZSByZWxhdGl2ZSBkaXJlY3Rpb24gYmV0d2VlbiB0d28gYWRqYWNlbnQgc3F1YXJlcy5cblx0ICogQHBhcmFtIHtvYmplY3R9IHN0YXJ0IFRoZSBzdGFydGluZyBzcXVhcmUuXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBlbmQgVGhlIGVuZGluZyBzcXVhcmUuXG5cdCAqIEByZXR1cm5zIHtzdHJpZ259IENhcmRpbmFsIGRpcmVjdGlvbiBmcm9tIHN0YXJ0IHRvIGVuZC5cblx0ICovXG5cdGZ1bmN0aW9uIHJlbGF0aXZlRGlyZWN0aW9uKHN0YXJ0LCBlbmQpIHtcblx0XHRpZiAoTWF0aC5hYnMoZW5kLnggLSBzdGFydC54KSArIE1hdGguYWJzKGVuZC55IC0gc3RhcnQueSkgPiAxKSB7XG5cdFx0XHQvLyBTcXVhcmVzIGFyZSBub3QgYWRqYWNlbnRcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblxuXHRcdGlmIChzdGFydC54IDwgZW5kLngpIHtcblx0XHRcdHJldHVybiAnZWFzdCc7XG5cdFx0fSBlbHNlIGlmIChlbmQueCA8IHN0YXJ0LngpIHtcblx0XHRcdHJldHVybiAnd2VzdCc7XG5cdFx0fSBlbHNlIGlmIChzdGFydC55IDwgZW5kLnkpIHtcblx0XHRcdHJldHVybiAnc291dGgnO1xuXHRcdH0gZWxzZSBpZiAoZW5kLnkgPCBzdGFydC55KSB7XG5cdFx0XHRyZXR1cm4gJ25vcnRoJztcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBnZW5lcmF0ZSgpIHtcblx0XHR2YXIgbWVzaCA9IFtdO1xuXHRcdHZhciBlZGdlcyA9IFtdO1xuXHRcdHZhciBsZW5ndGggPSAwO1xuXHRcdHZhciB4LCB5O1xuXHRcdHZhciBzdGFydCwgZW5kO1xuXG5cdFx0ZnVuY3Rpb24gZ2V0U3F1YXJlKHNxdWFyZSkge1xuXHRcdFx0cmV0dXJuIG1lc2hbc3F1YXJlLnhdW3NxdWFyZS55XTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBpc29sYXRlZChzcXVhcmUpIHtcblx0XHRcdHNxdWFyZSA9IGdldFNxdWFyZShzcXVhcmUpO1xuXHRcdFx0cmV0dXJuIERJUkVDVElPTlMuZXZlcnkoZGlyID0+IHNxdWFyZVtkaXJdICE9PSB0cnVlKTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBjb25uZWN0KGEsIGIpIHtcblx0XHRcdC8vY29uc29sZS5sb2coWydDT05ORUNUSU5HICgnLGEueCwnLCcsYS55LCcpIGFuZCAoJyxiLngsJywnLGIueSwnKS4nXS5qb2luKCcnKSk7XG5cdFx0XHRtZXNoW2EueF1bYS55XVtyZWxhdGl2ZURpcmVjdGlvbihhLCBiKV0gPSB0cnVlO1xuXHRcdFx0bWVzaFtiLnhdW2IueV1bcmVsYXRpdmVEaXJlY3Rpb24oYiwgYSldID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBvcGVuRWRnZShzcXVhcmUpIHtcblx0XHRcdHZhciB7eCwgeX0gPSBzcXVhcmU7XG5cdFx0XHRpZiAoeCA9PT0gMCkge1xuXHRcdFx0XHRtZXNoW3hdW3ldLndlc3QgPSB0cnVlO1xuXHRcdFx0fSBlbHNlIGlmICh5ID09PSAwKSB7XG5cdFx0XHRcdG1lc2hbeF1beV0ubm9ydGggPSB0cnVlO1xuXHRcdFx0fSBlbHNlIGlmICh4ID09PSAod2lkdGggLSAxKSkge1xuXHRcdFx0XHRtZXNoW3hdW3ldLmVhc3QgPSB0cnVlO1xuXHRcdFx0fSBlbHNlIGlmICh5ID09PSAoaGVpZ2h0IC0gMSkpIHtcblx0XHRcdFx0bWVzaFt4XVt5XS5zb3V0aCA9IHRydWU7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ0Rlc3RpbmF0aW9uIG5vdCBvbiBlZGdlLicpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHNlYXJjaChwb3MpIHtcblx0XHRcdHZhciBhZGphY2VuY2llcywgb3B0aW9ucywgaGVhZGluZywgbmV4dDtcblxuXHRcdFx0aWYgKHBvcy54ID09PSBlbmQueCAmJiBwb3MueSA9PT0gZW5kLnkpIHtcblx0XHRcdFx0b3BlbkVkZ2UocG9zKTtcblx0XHRcdFx0Y29uc29sZS5sb2coJ0xFTkdUSCcsIGxlbmd0aCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0YWRqYWNlbmNpZXMgPSBhZGphY2VudFNxdWFyZXMocG9zKTtcblxuXHRcdFx0d2hpbGUgKDEpIHtcblx0XHRcdFx0b3B0aW9ucyA9IE9iamVjdC5rZXlzKGFkamFjZW5jaWVzKVxuXHRcdFx0XHRcdC5maWx0ZXIoZGlyID0+IGFkamFjZW5jaWVzW2Rpcl0pXG5cdFx0XHRcdFx0LmZpbHRlcihkaXIgPT4gaXNvbGF0ZWQoYWRqYWNlbnRTcXVhcmUocG9zLCBkaXIpKSk7XG5cdFx0XHRcdGlmICghb3B0aW9ucy5sZW5ndGgpIGJyZWFrO1xuXG5cdFx0XHRcdGhlYWRpbmcgPSByYW5kb21FbGVtZW50KG9wdGlvbnMpO1xuXHRcdFx0XHRuZXh0ID0gYWRqYWNlbmNpZXNbaGVhZGluZ107XG5cdFx0XHRcdGNvbm5lY3QocG9zLCBuZXh0KTtcblx0XHRcdFx0bGVuZ3RoKys7XG5cdFx0XHRcdHNlYXJjaChuZXh0KTtcblx0XHRcdFx0bGVuZ3RoLS07XG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHRmb3IgKHggPSAwOyB4IDwgd2lkdGg7IHgrKykge1xuXHRcdFx0bWVzaFt4XSA9IFtdO1xuXHRcdFx0Zm9yICh5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7XG5cdFx0XHRcdGlmICh4ID09PSAwIHx8XG5cdFx0XHRcdFx0eSA9PT0gMCB8fFxuXHRcdFx0XHRcdHggPT09ICh3aWR0aCAtIDEpIHx8XG5cdFx0XHRcdFx0eSA9PT0gKGhlaWdodCAtIDEpXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdGVkZ2VzLnB1c2goe3gsIHl9KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdG1lc2hbeF1beV0gPSB7XG5cdFx0XHRcdFx0bm9ydGg6IDAgPCB5ID8gZmFsc2UgOiBudWxsLFxuXHRcdFx0XHRcdHNvdXRoOiB5IDwgKGhlaWdodCAtIDEpID8gZmFsc2UgOiBudWxsLFxuXHRcdFx0XHRcdHdlc3Q6IDAgPCB4ID8gZmFsc2UgOiBudWxsLFxuXHRcdFx0XHRcdGVhc3Q6IHggPCAod2lkdGggLSAxKSA/IGZhbHNlIDogbnVsbFxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHN0YXJ0ID0gcmFuZG9tRWxlbWVudChlZGdlcyk7XG5cdFx0cGF0aC5wdXNoKHN0YXJ0KTtcblx0XHRkbyB7XG5cdFx0XHRlbmQgPSByYW5kb21FbGVtZW50KGVkZ2VzKTtcblx0XHR9IHdoaWxlIChzdGFydC54ID09PSBlbmQueCB8fCBzdGFydC55ID09PSBlbmQueSk7XG5cblx0XHRvcGVuRWRnZShzdGFydCk7XG5cdFx0c2VhcmNoKHN0YXJ0KTtcblxuXHRcdHJldHVybiB7XG5cdFx0XHRtZXNoLFxuXHRcdFx0c3RhcnQsXG5cdFx0XHRlbmRcblx0XHR9O1xuXHR9XG5cblx0ZnVuY3Rpb24gYnJpZGdlRWRnZShzcXVhcmUsIGNvbG9yKSB7XG5cdFx0aWYgKHNxdWFyZS54ID09PSAwKSB7IC8vIFdlc3Rcblx0XHRcdGdyaWQuYnJpZGdlKHNxdWFyZS54IC0gMSwgc3F1YXJlLnksIHNxdWFyZS54LCBzcXVhcmUueSwgY29sb3IpO1xuXHRcdH0gZWxzZSBpZiAoc3F1YXJlLnkgPT09IDApIHsgLy8gTm9ydGhcblx0XHRcdGdyaWQuYnJpZGdlKHNxdWFyZS54LCBzcXVhcmUueSAtIDEsIHNxdWFyZS54LCBzcXVhcmUueSwgY29sb3IpO1xuXHRcdH0gZWxzZSBpZiAoc3F1YXJlLnggPT09ICh3aWR0aCAtIDEpKSB7IC8vIEVhc3Rcblx0XHRcdGdyaWQuYnJpZGdlKHNxdWFyZS54LCBzcXVhcmUueSwgc3F1YXJlLnggKyAxLCBzcXVhcmUueSwgY29sb3IpO1xuXHRcdH0gZWxzZSBpZiAoc3F1YXJlLnkgPT09IChoZWlnaHQgLSAxKSkgeyAvLyBTb3V0aFxuXHRcdFx0Z3JpZC5icmlkZ2Uoc3F1YXJlLngsIHNxdWFyZS55LCBzcXVhcmUueCwgc3F1YXJlLnkgKyAxLCBjb2xvcik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignU3F1YXJlIGlzIG5vdCBvbiBlZGdlLicpO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIHJlbmRlcigkZWwpIHtcblx0XHR2YXIgeCwgeTtcblxuXHRcdGdyaWQgPSBuZXcgR3JpZCgkZWwpO1xuXHRcdGdyaWQuY2xlYXIoKTtcblx0XHRncmlkLndpZHRoKHdpZHRoKTtcblx0XHRncmlkLmhlaWdodChoZWlnaHQpO1xuXG5cdFx0Zm9yICh4ID0gMDsgeCA8IHdpZHRoOyB4KyspIHtcblx0XHRcdGZvciAoeSA9IDA7IHkgPCBoZWlnaHQ7IHkrKykge1xuXHRcdFx0XHRpZiAoIW1hemUubWVzaFt4XVt5XS53ZXN0KSB7XG5cdFx0XHRcdFx0Z3JpZC5saW5lKHgsIHksIHgsIHkgKyAxKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoIW1hemUubWVzaFt4XVt5XS5ub3J0aCkge1xuXHRcdFx0XHRcdGdyaWQubGluZSh4LCB5LCB4ICsgMSwgeSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBPbmx5IG5lZWQgdG8gZHJhdyBzb3V0aCBhbmQgZWFzdCBvbiBlZGdlc1xuXHRcdFx0XHRpZiAoeCA9PT0gd2lkdGggLSAxICYmICFtYXplLm1lc2hbeF1beV0uZWFzdCkge1xuXHRcdFx0XHRcdGdyaWQubGluZSh4ICsgMSwgeSwgeCArIDEsIHkgKyAxKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoeSA9PT0gaGVpZ2h0IC0gMSAmJiAhbWF6ZS5tZXNoW3hdW3ldLnNvdXRoKSB7XG5cdFx0XHRcdFx0Z3JpZC5saW5lKHgsIHkgKyAxLCB4ICsgMSwgeSArIDEpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Z3JpZC5maWxsKG1hemUuc3RhcnQueCwgbWF6ZS5zdGFydC55LCBHUkVFTik7XG5cdFx0Z3JpZC5maWxsKG1hemUuZW5kLngsIG1hemUuZW5kLnksIFJFRCk7XG5cdFx0YnJpZGdlRWRnZShtYXplLnN0YXJ0LCBHUkVFTik7XG5cdFx0YnJpZGdlRWRnZShtYXplLmVuZCwgUkVEKTtcblx0fVxuXG5cdGZ1bmN0aW9uIG1vdmUoZGlyKSB7XG5cdFx0dmFyIHBvcyA9IGxhc3RFbGVtZW50KHBhdGgpO1xuXHRcdHZhciBwcmV2aW91cyA9IHBhdGhbcGF0aC5sZW5ndGggLSAyXTtcblx0XHR2YXIgbmV4dDtcblxuXHRcdC8vIERvbid0IGJyZWFrIGRvd24gd2FsbHNcblx0XHRpZiAoIW1hemUubWVzaFtwb3MueF1bcG9zLnldW2Rpcl0pIHJldHVybiBmYWxzZTtcblxuXHRcdG5leHQgPSBhZGphY2VudFNxdWFyZShwb3MsIGRpcik7XG5cdFx0aWYgKCFuZXh0KSByZXR1cm4gZmFsc2U7XG5cblx0XHRpZiAocHJldmlvdXMgJiYgbmV4dC54ID09PSBwcmV2aW91cy54ICYmIG5leHQueSA9PT0gcHJldmlvdXMueSkge1xuXHRcdFx0Z3JpZC5icmlkZ2UocG9zLngsIHBvcy55LCBuZXh0LngsIG5leHQueSwgUkVEKTtcblx0XHRcdGdyaWQuZmlsbChwb3MueCwgcG9zLnksIFJFRCk7XG5cdFx0XHRwYXRoLnBvcCgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRncmlkLmJyaWRnZShwb3MueCwgcG9zLnksIG5leHQueCwgbmV4dC55LCBHUkVFTik7XG5cdFx0XHRncmlkLmZpbGwobmV4dC54LCBuZXh0LnksIEdSRUVOKTtcblx0XHRcdHBhdGgucHVzaChuZXh0KTtcblx0XHR9XG5cblx0XHRpZiAobmV4dC54ID09PSBtYXplLmVuZC54ICYmIG5leHQueSA9PT0gbWF6ZS5lbmQueSkge1xuXHRcdFx0YnJpZGdlRWRnZShuZXh0LCBHUkVFTik7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0ZnVuY3Rpb24gZW50ZXJTcXVhcmUoc3F1YXJlKSB7XG5cdFx0dmFyIHBvcyA9IGxhc3RFbGVtZW50KHBhdGgpO1xuXHRcdHZhciBkaXIgPSByZWxhdGl2ZURpcmVjdGlvbihwb3MsIHNxdWFyZSk7XG5cdFx0aWYgKGRpcikgbW92ZShkaXIpO1xuXHR9XG5cblx0dmFyIGhvdmVyID0gKGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgX3gsIF95O1xuXG5cdFx0cmV0dXJuIGZ1bmN0aW9uICh4LCB5KSB7XG5cdFx0XHR4ID0gZ3JpZC50b1NxdWFyZXMoeCk7XG5cdFx0XHR5ID0gZ3JpZC50b1NxdWFyZXMoeSk7XG5cdFx0XHRpZiAoeCAhPT0gbnVsbCAmJiB5ICE9PSBudWxsICYmICh4ICE9PSBfeCB8fCB5ICE9PSBfeSkpIHtcblx0XHRcdFx0X3ggPSB4O1xuXHRcdFx0XHRfeSA9IHk7XG5cdFx0XHRcdGVudGVyU3F1YXJlKHt4LCB5fSk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHR9KSgpO1xuXG5cdG1hemUgPSBnZW5lcmF0ZSgpO1xuXG5cdHJldHVybiB7XG5cdFx0cmVuZGVyLFxuXHRcdG1vdmUsXG5cdFx0aG92ZXJcblx0fTtcblxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IE1hemU7XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiByYW5kb20oKSB7XG5cdGxldCB4ID0gTWF0aC5zaW4ocmFuZG9tLnNlZWQrKykgKiAxMDAwMDtcblx0cmV0dXJuIHggLSBNYXRoLmZsb29yKHgpO1xufVxuXG5yYW5kb20uc2VlZCA9IE1hdGgucmFuZG9tKCk7XG4iXX0=