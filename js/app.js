(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _slicedToArray = function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { var _arr = []; for (var _iterator = arr[Symbol.iterator](), _step; !(_step = _iterator.next()).done;) { _arr.push(_step.value); if (i && _arr.length === i) break; } return _arr; } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

var Maze = _interopRequire(require("./maze"));

var random = _interopRequire(require("./random"));

var App = (function () {
	function App() {
		var _this = this;
		_classCallCheck(this, App);

		this.$width = document.querySelector("#width");
		this.$height = document.querySelector("#height");
		this.$permalink = document.querySelector("#permalink");
		this.$canvas = document.querySelector("#canvas");

		document.querySelector("#generate").addEventListener("click", function (event) {
			event.preventDefault();
			_this.clearPermalink();
			_this.generate();
		});

		document.body.addEventListener("keyup", function (event) {
			var key = event.key || event.charCode || event.keyCode;
			var direction = ["west", "north", "east", "south"][key - 37];
			if (!direction) return;

			event.preventDefault();
			_this.maze.move(direction);
		});

		this.$canvas.addEventListener("mousemove", function (event) {
			_this.maze.hover(event.layerX, event.layerY);
		});

		// Attempt to read maze parameters from URL hash
		var _dXDSDD$exec = /#(\d+)x(\d+)(?:s(\d+.\d+))?|.*/.exec(window.location.hash);

		var _dXDSDD$exec2 = _slicedToArray(_dXDSDD$exec, 4);

		var width = _dXDSDD$exec2[1];
		var height = _dXDSDD$exec2[2];
		var seed = _dXDSDD$exec2[3];


		if (width && height) {
			this.width = width;
			this.height = height;
		}

		if (seed) {
			random.seed = parseFloat(seed);
		}

		this.generate();
	}

	_prototypeProperties(App, null, {
		width: {
			get: function () {
				return +this.$width.value;
			},
			set: function (value) {
				this.$width.value = value;
			},
			configurable: true
		},
		height: {
			get: function () {
				return +this.$height.value;
			},
			set: function (value) {
				this.$height.value = value;
			},
			configurable: true
		},
		generate: {
			value: function generate() {
				this.setPermalink();

				this.maze = new Maze(this.width, this.height);
				this.maze.render(this.$canvas);
			},
			writable: true,
			configurable: true
		},
		setPermalink: {
			value: function setPermalink() {
				var hash = "#" + this.width + "x" + this.height + "s" + random.seed;
				var href = window.location.href.split("#")[0] + hash;
				this.$permalink.setAttribute("href", href);
			},
			writable: true,
			configurable: true
		},
		clearPermalink: {
			value: function clearPermalink() {
				window.location.href = window.location.href.split("#")[0];
			},
			writable: true,
			configurable: true
		}
	});

	return App;
})();

new App();

},{"./maze":3,"./random":4}],2:[function(require,module,exports){
"use strict";

var Grid = function ($el) {
	var SIZE = 20; // Width of square in pixels
	var WEIGHT = 2; // Width of line in pixels

	var ctx = $el.getContext("2d");

	function pixelHeight(val) {
		if (arguments.length > 0) {
			ctx.canvas.height = val;
		}
		return ctx.canvas.height;
	}

	function pixelWidth(val) {
		if (arguments.length > 0) {
			ctx.canvas.width = val;
		}
		return ctx.canvas.width;
	}

	function gridHeight(squares) {
		if (arguments.length > 0) {
			pixelHeight(squares * SIZE + (squares + 1) * WEIGHT);
		}
		return (pixelHeight() - WEIGHT) / (SIZE + WEIGHT);
	}

	function gridWidth(squares) {
		if (arguments.length > 0) {
			pixelWidth(squares * SIZE + (squares + 1) * WEIGHT);
		}
		return (pixelWidth() - WEIGHT) / (SIZE + WEIGHT);
	}

	function toPixels(sq) {
		return WEIGHT / 2 + sq * (WEIGHT + SIZE);
	}

	function mod(a, b) {
		return (a % b + b) % b;
	}

	function toSquares(px) {
		if (mod(px - WEIGHT, SIZE + WEIGHT) >= SIZE - WEIGHT) {
			// On a line
			return null;
		}
		return Math.floor((px - WEIGHT) / (SIZE + WEIGHT));
	}

	function clear() {
		ctx.clearRect(0, 0, pixelWidth(), pixelHeight());
	}

	function fill(x, y, color) {
		var _fillStyle = ctx.fillStyle;
		ctx.fillStyle = color;

		ctx.fillRect(toPixels(x) + WEIGHT / 2, toPixels(y) + WEIGHT / 2, SIZE, SIZE);

		ctx.fillStyle = _fillStyle;
	}

	function bridge(x1, y1, x2, y2, color) {
		if (Math.abs(x2 - x1) + Math.abs(y2 - y1) !== 1) {
			throw new Error("Squares are not adjacent.");
		}

		var x = Math.max(x1, x2),
		    y = Math.max(y1, y2);

		var _lineCap = ctx.lineCap;
		var _lineWidth = ctx.lineWidth;
		var _strokeStyle = ctx.strokeStyle;
		ctx.lineCap = "square";
		ctx.lineWidth = WEIGHT;
		ctx.strokeStyle = color;

		ctx.beginPath();
		if (x1 === x2) {
			// Bridge north/south squares
			// Narrower x dimensions
			ctx.moveTo(toPixels(x1) + WEIGHT, toPixels(y));
			ctx.lineTo(toPixels(x1 + 1) - WEIGHT, toPixels(y));
		} else {
			// Bridge east/west squares
			// Narrower y dimensions
			ctx.moveTo(toPixels(x), toPixels(y1) + WEIGHT);
			ctx.lineTo(toPixels(x), toPixels(y1 + 1) - WEIGHT);
		}
		ctx.stroke();

		ctx.lineCap = _lineCap;
		ctx.lineWidth = _lineWidth;
		ctx.strokeStyle = _strokeStyle;
	}

	function line(x1, y1, x2, y2) {
		var _lineCap = ctx.lineCap;
		var _lineWidth = ctx.lineWidth;
		var _strokeStyle = ctx.strokeStyle;
		ctx.lineCap = "round";
		ctx.lineWidth = WEIGHT;
		ctx.strokeStyle = "#16191d";

		ctx.beginPath();
		ctx.moveTo(toPixels(x1), toPixels(y1));
		ctx.lineTo(toPixels(x2), toPixels(y2));
		ctx.stroke();

		ctx.lineCap = _lineCap;
		ctx.lineWidth = _lineWidth;
		ctx.strokeStyle = _strokeStyle;
	}

	return {
		height: gridHeight,
		width: gridWidth,
		pixelHeight: pixelHeight,
		pixelWidth: pixelWidth,
		clear: clear,
		fill: fill,
		bridge: bridge,
		line: line,
		toPixels: toPixels,
		toSquares: toSquares
	};
};

module.exports = Grid;

},{}],3:[function(require,module,exports){
"use strict";

var Grid = require("./grid");
var random = require("./random");

var Maze = function (width, height) {
	var DIRECTIONS = ["north", "south", "east", "west"];
	var GREEN = "#4ecdc4",
	    RED = "#ff6b6b";

	var path = [];
	var maze, grid;

	function randomInt(max) {
		return Math.floor(random() * max);
	}

	function randomElement(arr) {
		return arr[randomInt(arr.length)];
	}

	function lastElement(arr) {
		return arr[arr.length - 1];
	}

	/**
  * Gets the coordinates of an adjacent square.
  * @param {object} start Starting square's coordinates.
  * @param {string} direction Cardinal direction of adjacent square.
  * @returns {object} Adjacent square's coordinates.
  */
	function adjacentSquare(start, direction) {
		switch (direction) {
			case "north":
				return start.y > 0 ? { x: start.x, y: start.y - 1 } : null;
			case "south":
				return start.y < height - 1 ? { x: start.x, y: start.y + 1 } : null;
			case "east":
				return start.x < width - 1 ? { x: start.x + 1, y: start.y } : null;
			case "west":
				return start.x > 0 ? { x: start.x - 1, y: start.y } : null;
			default:
				throw new Exception("Invalid direction " + dir);
		}
	}

	/**
  * Gets the coordinates of all squares adjacent to a given square.
  * @param {object} start Coordinates of the starting square.
  * @returns {object} Coordinates of adjacent squares in each direction.
  */
	function adjacentSquares(start) {
		return DIRECTIONS.reduce(function (obj, dir) {
			obj[dir] = adjacentSquare(start, dir);
			return obj;
		}, {});
	}

	/**
  * Gets the relative direction between two adjacent squares.
  * @param {object} start The starting square.
  * @param {object} end The ending square.
  * @returns {strign} Cardinal direction from start to end.
  */
	function relativeDirection(start, end) {
		if (Math.abs(end.x - start.x) + Math.abs(end.y - start.y) > 1) {
			// Squares are not adjacent
			return null;
		}

		if (start.x < end.x) {
			return "east";
		} else if (end.x < start.x) {
			return "west";
		} else if (start.y < end.y) {
			return "south";
		} else if (end.y < start.y) {
			return "north";
		}
	}

	function generate() {
		var mesh = [];
		var edges = [];
		var length = 0;
		var x, y;
		var start, end;

		function getSquare(square) {
			return mesh[square.x][square.y];
		}

		function isolated(square) {
			square = getSquare(square);
			return DIRECTIONS.every(function (dir) {
				return square[dir] !== true;
			});
		}

		function connect(a, b) {
			//console.log(['CONNECTING (',a.x,',',a.y,') and (',b.x,',',b.y,').'].join(''));
			mesh[a.x][a.y][relativeDirection(a, b)] = true;
			mesh[b.x][b.y][relativeDirection(b, a)] = true;
		}

		function openEdge(square) {
			var x = square.x;
			var y = square.y;
			if (x === 0) {
				mesh[x][y].west = true;
			} else if (y === 0) {
				mesh[x][y].north = true;
			} else if (x === width - 1) {
				mesh[x][y].east = true;
			} else if (y === height - 1) {
				mesh[x][y].south = true;
			} else {
				throw new Error("Destination not on edge.");
			}
		}

		function search(pos) {
			var adjacencies, options, heading, next;

			if (pos.x === end.x && pos.y === end.y) {
				openEdge(pos);
				console.log("LENGTH", length);
				return;
			}

			adjacencies = adjacentSquares(pos);

			while (1) {
				options = Object.keys(adjacencies).filter(function (dir) {
					return adjacencies[dir];
				}).filter(function (dir) {
					return isolated(adjacentSquare(pos, dir));
				});
				if (!options.length) break;

				heading = randomElement(options);
				next = adjacencies[heading];
				connect(pos, next);
				length++;
				search(next);
				length--;
			}
		}

		for (x = 0; x < width; x++) {
			mesh[x] = [];
			for (y = 0; y < height; y++) {
				if (x === 0 || y === 0 || x === width - 1 || y === height - 1) {
					edges.push({ x: x, y: y });
				}

				mesh[x][y] = {
					north: 0 < y ? false : null,
					south: y < height - 1 ? false : null,
					west: 0 < x ? false : null,
					east: x < width - 1 ? false : null
				};
			}
		}

		start = randomElement(edges);
		path.push(start);
		do {
			end = randomElement(edges);
		} while (start.x === end.x || start.y === end.y);

		openEdge(start);
		search(start);

		return {
			mesh: mesh,
			start: start,
			end: end
		};
	}

	function bridgeEdge(square, color) {
		if (square.x === 0) {
			// West
			grid.bridge(square.x - 1, square.y, square.x, square.y, color);
		} else if (square.y === 0) {
			// North
			grid.bridge(square.x, square.y - 1, square.x, square.y, color);
		} else if (square.x === width - 1) {
			// East
			grid.bridge(square.x, square.y, square.x + 1, square.y, color);
		} else if (square.y === height - 1) {
			// South
			grid.bridge(square.x, square.y, square.x, square.y + 1, color);
		} else {
			throw new Error("Square is not on edge.");
		}
	}

	function render($el) {
		var x, y;

		grid = new Grid($el);
		grid.clear();
		grid.width(width);
		grid.height(height);

		for (x = 0; x < width; x++) {
			for (y = 0; y < height; y++) {
				if (!maze.mesh[x][y].west) {
					grid.line(x, y, x, y + 1);
				}
				if (!maze.mesh[x][y].north) {
					grid.line(x, y, x + 1, y);
				}

				// Only need to draw south and east on edges
				if (x === width - 1 && !maze.mesh[x][y].east) {
					grid.line(x + 1, y, x + 1, y + 1);
				}
				if (y === height - 1 && !maze.mesh[x][y].south) {
					grid.line(x, y + 1, x + 1, y + 1);
				}
			}
		}

		grid.fill(maze.start.x, maze.start.y, GREEN);
		grid.fill(maze.end.x, maze.end.y, RED);
		bridgeEdge(maze.start, GREEN);
		bridgeEdge(maze.end, RED);
	}

	function move(dir) {
		var pos = lastElement(path);
		var previous = path[path.length - 2];
		var next;

		// Don't break down walls
		if (!maze.mesh[pos.x][pos.y][dir]) {
			return false;
		}next = adjacentSquare(pos, dir);
		if (!next) {
			return false;
		}if (previous && next.x === previous.x && next.y === previous.y) {
			grid.bridge(pos.x, pos.y, next.x, next.y, RED);
			grid.fill(pos.x, pos.y, RED);
			path.pop();
		} else {
			grid.bridge(pos.x, pos.y, next.x, next.y, GREEN);
			grid.fill(next.x, next.y, GREEN);
			path.push(next);
		}

		if (next.x === maze.end.x && next.y === maze.end.y) {
			bridgeEdge(next, GREEN);
			return true;
		}
		return false;
	}

	function enterSquare(square) {
		var pos = lastElement(path);
		var dir = relativeDirection(pos, square);
		if (dir) move(dir);
	}

	var hover = (function () {
		var _x, _y;

		return function (x, y) {
			x = grid.toSquares(x);
			y = grid.toSquares(y);
			if (x !== null && y !== null && (x !== _x || y !== _y)) {
				_x = x;
				_y = y;
				enterSquare({ x: x, y: y });
			}
		};
	})();

	maze = generate();

	return {
		render: render,
		move: move,
		hover: hover
	};
};

module.exports = Maze;

},{"./grid":2,"./random":4}],4:[function(require,module,exports){
"use strict";

function random() {
	var x = Math.sin(random.seed++) * 10000;
	return x - Math.floor(x);
}

random.seed = Math.random();

module.exports = random;

},{}]},{},[1])


//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvYXBwLmpzIiwic3JjL2dyaWQuanMiLCJzcmMvbWF6ZS5qcyIsInNyYy9yYW5kb20uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7O0lDQU8sSUFBSSwyQkFBTSxRQUFROztJQUNsQixNQUFNLDJCQUFNLFVBQVU7O0lBRXZCLEdBQUc7QUFPRyxVQVBOLEdBQUc7O3dCQUFILEdBQUc7O0FBUVAsTUFBSSxDQUFDLE1BQU0sR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQy9DLE1BQUksQ0FBQyxPQUFPLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUNqRCxNQUFJLENBQUMsVUFBVSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDdkQsTUFBSSxDQUFDLE9BQU8sR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQyxDQUFDOztBQUVqRCxVQUFRLENBQUMsYUFBYSxDQUFDLFdBQVcsQ0FBQyxDQUNqQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsVUFBQyxLQUFLLEVBQUs7QUFDckMsUUFBSyxDQUFDLGNBQWMsRUFBRSxDQUFDO0FBQ3ZCLFNBQUssY0FBYyxFQUFFLENBQUM7QUFDdEIsU0FBSyxRQUFRLEVBQUUsQ0FBQztHQUNoQixDQUFDLENBQUM7O0FBRUosVUFBUSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsVUFBQyxLQUFLLEVBQUs7QUFDbEQsT0FBSSxHQUFHLEdBQUcsS0FBSyxDQUFDLEdBQUcsSUFBSSxLQUFLLENBQUMsUUFBUSxJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUM7QUFDdkQsT0FBSSxTQUFTLEdBQUcsQ0FBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLE1BQU0sRUFBRSxPQUFPLENBQUMs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LFVBQVMsTUFBTSxDQUFDLEdBQUcsRUFBRTtBQUNwQixNQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7O0FBRVQsTUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ3JCLE1BQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztBQUNiLE1BQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDbEIsTUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQzs7QUFFcEIsT0FBSyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxLQUFLLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDM0IsUUFBSyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDNUIsUUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFO0FBQzFCLFNBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0tBQzFCO0FBQ0QsUUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFO0FBQzNCLFNBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0tBQzFCOzs7QUFHRCxRQUFJLENBQUMsS0FBSyxLQUFLLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUU7QUFDN0MsU0FBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztLQUNsQztBQUNELFFBQUksQ0FBQyxLQUFLLE1BQU0sR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRTtBQUMvQyxTQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0tBQ2xDO0lBQ0Q7R0FDRDs7QUFFRCxNQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQzdDLE1BQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDdkMsWUFBVSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDOUIsWUFBVSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7RUFDMUI7O0FBRUQsVUFBUyxJQUFJLENBQUMsR0FBRyxFQUFFO0FBQ2xCLE1BQUksR0FBRyxHQUFHLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUM1QixNQUFJLFFBQVEsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztBQUNyQyxNQUFJLElBQUksQ0FBQzs7O0FBR1QsTUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7QUFBRSxVQUFPLEtBQUssQ0FBQztHQUFBLEFBRWhELElBQUksR0FBRyxjQUFjLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBQ2hDLE1BQUksQ0FBQyxJQUFJO0FBQUUsVUFBTyxLQUFLLENBQUM7R0FB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LENBQUMsTUFBTSxFQUFFLENBQUM7O0FBRTVCLE1BQU0sQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZVJvb3QiOiIvanN4Iiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJpbXBvcnQgTWF6ZSBmcm9tICcuL21hemUnO1xuaW1wb3J0IHJhbmRvbSBmcm9tICcuL3JhbmRvbSc7XG5cbmNsYXNzIEFwcCB7XG5cdGdldCB3aWR0aCgpIHsgcmV0dXJuICt0aGlzLiR3aWR0aC52YWx1ZTsgfVxuXHRzZXQgd2lkdGgodmFsdWUpIHsgdGhpcy4kd2lkdGgudmFsdWUgPSB2YWx1ZTsgfVxuXG5cdGdldCBoZWlnaHQoKSB7IHJldHVybiArdGhpcy4kaGVpZ2h0LnZhbHVlOyB9XG5cdHNldCBoZWlnaHQodmFsdWUpIHsgdGhpcy4kaGVpZ2h0LnZhbHVlID0gdmFsdWU7IH1cblxuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHR0aGlzLiR3aWR0aCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN3aWR0aCcpO1xuXHRcdHRoaXMuJGhlaWdodCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNoZWlnaHQnKTtcblx0XHR0aGlzLiRwZXJtYWxpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGVybWFsaW5rJyk7XG5cdFx0dGhpcy4kY2FudmFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NhbnZhcycpO1xuXG5cdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2dlbmVyYXRlJylcblx0XHRcdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHR0aGlzLmNsZWFyUGVybWFsaW5rKCk7XG5cdFx0XHRcdHRoaXMuZ2VuZXJhdGUoKTtcblx0XHRcdH0pO1xuXG5cdFx0ZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIChldmVudCkgPT4ge1xuXHRcdFx0bGV0IGtleSA9IGV2ZW50LmtleSB8fCBldmVudC5jaGFyQ29kZSB8fCBldmVudC5rZXlDb2RlO1xuXHRcdFx0bGV0IGRpcmVjdGlvbiA9IFsnd2VzdCcsICdub3J0aCcsICdlYXN0JywgJ3NvdXRoJ11ba2V5IC0gMzddO1xuXHRcdFx0aWYgKCFkaXJlY3Rpb24pIHJldHVybjtcblxuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdHRoaXMubWF6ZS5tb3ZlKGRpcmVjdGlvbik7XG5cdFx0fSk7XG5cblx0XHR0aGlzLiRjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgKGV2ZW50KSA9PiB7XG5cdFx0XHR0aGlzLm1hemUuaG92ZXIoZXZlbnQubGF5ZXJYLCBldmVudC5sYXllclkpO1xuXHRcdH0pO1xuXG5cdFx0Ly8gQXR0ZW1wdCB0byByZWFkIG1hemUgcGFyYW1ldGVycyBmcm9tIFVSTCBoYXNoXG5cdFx0bGV0IFssIHdpZHRoLCBoZWlnaHQsIHNlZWRdID0gLyMoXFxkKyl4KFxcZCspKD86cyhcXGQrLlxcZCspKT98LiovXG5cdFx0XHQuZXhlYyh3aW5kb3cubG9jYXRpb24uaGFzaCk7XG5cblx0XHRpZiAod2lkdGggJiYgaGVpZ2h0KSB7XG5cdFx0XHR0aGlzLndpZHRoID0gd2lkdGg7XG5cdFx0XHR0aGlzLmhlaWdodCA9IGhlaWdodDtcblx0XHR9XG5cblx0XHRpZiAoc2VlZCkge1xuXHRcdFx0cmFuZG9tLnNlZWQgPSBwYXJzZUZsb2F0KHNlZWQpO1xuXHRcdH1cblxuXHRcdHRoaXMuZ2VuZXJhdGUoKTtcblx0fVxuXG5cdGdlbmVyYXRlKCkge1xuXHRcdHRoaXMuc2V0UGVybWFsaW5rKCk7XG5cblx0XHR0aGlzLm1hemUgPSBuZXcgTWF6ZSh0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XG5cdFx0dGhpcy5tYXplLnJlbmRlcih0aGlzLiRjYW52YXMpO1xuXHR9XG5cblx0c2V0UGVybWFsaW5rKCkge1xuXHRcdGxldCBoYXNoID0gYCMke3RoaXMud2lkdGh9eCR7dGhpcy5oZWlnaHR9cyR7cmFuZG9tLnNlZWR9YDtcblx0XHRsZXQgaHJlZiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KCcjJylbMF0gKyBoYXNoO1xuXHRcdHRoaXMuJHBlcm1hbGluay5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBocmVmKTtcblx0fVxuXG5cdGNsZWFyUGVybWFsaW5rKCkge1xuXHRcdHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gd2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoJyMnKVswXTtcblx0fVxufVxuXG5uZXcgQXBwKCk7XG4iLCJ2YXIgR3JpZCA9IGZ1bmN0aW9uICgkZWwpIHtcblxuXHR2YXIgU0laRSA9IDIwOyAvLyBXaWR0aCBvZiBzcXVhcmUgaW4gcGl4ZWxzXG5cdHZhciBXRUlHSFQgPSAyOyAvLyBXaWR0aCBvZiBsaW5lIGluIHBpeGVsc1xuXG5cdHZhciBjdHggPSAkZWwuZ2V0Q29udGV4dCgnMmQnKTtcblxuXHRmdW5jdGlvbiBwaXhlbEhlaWdodCh2YWwpIHtcblx0XHRpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDApIHtcblx0XHRcdGN0eC5jYW52YXMuaGVpZ2h0ID0gdmFsO1xuXHRcdH1cblx0XHRyZXR1cm4gY3R4LmNhbnZhcy5oZWlnaHQ7XG5cdH1cblxuXHRmdW5jdGlvbiBwaXhlbFdpZHRoKHZhbCkge1xuXHRcdGlmIChhcmd1bWVudHMubGVuZ3RoID4gMCkge1xuXHRcdFx0Y3R4LmNhbnZhcy53aWR0aCA9IHZhbDtcblx0XHR9XG5cdFx0cmV0dXJuIGN0eC5jYW52YXMud2lkdGg7XG5cdH1cblxuXHRmdW5jdGlvbiBncmlkSGVpZ2h0KHNxdWFyZXMpIHtcblx0XHRpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDApIHtcblx0XHRcdHBpeGVsSGVpZ2h0KHNxdWFyZXMgKiBTSVpFICsgKHNxdWFyZXMgKyAxKSAqIFdFSUdIVCk7XG5cdFx0fVxuXHRcdHJldHVybiAocGl4ZWxIZWlnaHQoKSAtIFdFSUdIVCkgLyAoU0laRSArIFdFSUdIVCk7XG5cdH1cblxuXHRmdW5jdGlvbiBncmlkV2lkdGgoc3F1YXJlcykge1xuXHRcdGlmIChhcmd1bWVudHMubGVuZ3RoID4gMCkge1xuXHRcdFx0cGl4ZWxXaWR0aChzcXVhcmVzICogU0laRSArIChzcXVhcmVzICsgMSkgKiBXRUlHSFQpO1xuXHRcdH1cblx0XHRyZXR1cm4gKHBpeGVsV2lkdGgoKSAtIFdFSUdIVCkgLyAoU0laRSArIFdFSUdIVCk7XG5cdH1cblxuXHRmdW5jdGlvbiB0b1BpeGVscyhzcSkge1xuXHRcdHJldHVybiAoV0VJR0hUIC8gMikgKyBzcSAqIChXRUlHSFQgKyBTSVpFKTtcblx0fVxuXG5cdGZ1bmN0aW9uIG1vZChhLCBiKSB7XG5cdFx0cmV0dXJuICgoYSAlIGIpICsgYikgJSBiO1xuXHR9XG5cblx0ZnVuY3Rpb24gdG9TcXVhcmVzKHB4KSB7XG5cdFx0aWYgKG1vZChweCAtIFdFSUdIVCwgU0laRSArIFdFSUdIVCkgPj0gKFNJWkUgLSBXRUlHSFQpKSB7XG5cdFx0XHQvLyBPbiBhIGxpbmVcblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH1cblx0XHRyZXR1cm4gTWF0aC5mbG9vcigocHggLSBXRUlHSFQpIC8gKFNJWkUgKyBXRUlHSFQpKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGNsZWFyKCkge1xuXHRcdGN0eC5jbGVhclJlY3QoMCwgMCwgcGl4ZWxXaWR0aCgpLCBwaXhlbEhlaWdodCgpKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGZpbGwoeCwgeSwgY29sb3IpIHtcblx0XHR2YXIgX2ZpbGxTdHlsZSA9IGN0eC5maWxsU3R5bGU7XG5cdFx0Y3R4LmZpbGxTdHlsZSA9IGNvbG9yO1xuXG5cdFx0Y3R4LmZpbGxSZWN0KFxuXHRcdFx0dG9QaXhlbHMoeCkgKyAoV0VJR0hUIC8gMiksXG5cdFx0XHR0b1BpeGVscyh5KSArIChXRUlHSFQgLyAyKSxcblx0XHRcdFNJWkUsIFNJWkVcblx0XHQpO1xuXG5cdFx0Y3R4LmZpbGxTdHlsZSA9IF9maWxsU3R5bGU7XG5cdH1cblxuXHRmdW5jdGlvbiBicmlkZ2UoeDEsIHkxLCB4MiwgeTIsIGNvbG9yKSB7XG5cdFx0aWYgKE1hdGguYWJzKHgyIC0geDEpICsgTWF0aC5hYnMoeTIgLSB5MSkgIT09IDEpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignU3F1YXJlcyBhcmUgbm90IGFkamFjZW50LicpO1xuXHRcdH1cblxuXHRcdHZhciB4ID0gTWF0aC5tYXgoeDEsIHgyKSwgeSA9IE1hdGgubWF4KHkxLCB5Mik7XG5cblx0XHR2YXIgX2xpbmVDYXAgICAgID0gY3R4LmxpbmVDYXA7XG5cdFx0dmFyIF9saW5lV2lkdGggICA9IGN0eC5saW5lV2lkdGg7XG5cdFx0dmFyIF9zdHJva2VTdHlsZSA9IGN0eC5zdHJva2VTdHlsZTtcblx0XHRjdHgubGluZUNhcCAgICAgID0gJ3NxdWFyZSc7XG5cdFx0Y3R4LmxpbmVXaWR0aCAgICA9IFdFSUdIVDtcblx0XHRjdHguc3Ryb2tlU3R5bGUgID0gY29sb3I7XG5cblx0XHRjdHguYmVnaW5QYXRoKCk7XG5cdFx0aWYgKHgxID09PSB4Mikge1xuXHRcdFx0Ly8gQnJpZGdlIG5vcnRoL3NvdXRoIHNxdWFyZXNcblx0XHRcdC8vIE5hcnJvd2VyIHggZGltZW5zaW9uc1xuXHRcdFx0Y3R4Lm1vdmVUbyh0b1BpeGVscyh4MSkgKyBXRUlHSFQsIHRvUGl4ZWxzKHkpKTtcblx0XHRcdGN0eC5saW5lVG8odG9QaXhlbHMoeDEgKyAxKSAtIFdFSUdIVCwgdG9QaXhlbHMoeSkpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBCcmlkZ2UgZWFzdC93ZXN0IHNxdWFyZXNcblx0XHRcdC8vIE5hcnJvd2VyIHkgZGltZW5zaW9uc1xuXHRcdFx0Y3R4Lm1vdmVUbyh0b1BpeGVscyh4KSwgdG9QaXhlbHMoeTEpICsgV0VJR0hUKTtcblx0XHRcdGN0eC5saW5lVG8odG9QaXhlbHMoeCksIHRvUGl4ZWxzKHkxICsgMSkgLSBXRUlHSFQpO1xuXHRcdH1cblx0XHRjdHguc3Ryb2tlKCk7XG5cblx0XHRjdHgubGluZUNhcCAgICAgPSBfbGluZUNhcDtcblx0XHRjdHgubGluZVdpZHRoICAgPSBfbGluZVdpZHRoO1xuXHRcdGN0eC5zdHJva2VTdHlsZSA9IF9zdHJva2VTdHlsZTtcblx0fVxuXG5cdGZ1bmN0aW9uIGxpbmUoeDEsIHkxLCB4MiwgeTIpIHtcblx0XHR2YXIgX2xpbmVDYXAgICAgID0gY3R4LmxpbmVDYXA7XG5cdFx0dmFyIF9saW5lV2lkdGggICA9IGN0eC5saW5lV2lkdGg7XG5cdFx0dmFyIF9zdHJva2VTdHlsZSA9IGN0eC5zdHJva2VTdHlsZTtcblx0XHRjdHgubGluZUNhcCAgICAgID0gJ3JvdW5kJztcblx0XHRjdHgubGluZVdpZHRoICAgID0gV0VJR0hUO1xuXHRcdGN0eC5zdHJva2VTdHlsZSAgPSAnIzE2MTkxZCc7XG5cblx0XHRjdHguYmVnaW5QYXRoKCk7XG5cdFx0Y3R4Lm1vdmVUbyh0b1BpeGVscyh4MSksIHRvUGl4ZWxzKHkxKSk7XG5cdFx0Y3R4LmxpbmVUbyh0b1BpeGVscyh4MiksIHRvUGl4ZWxzKHkyKSk7XG5cdFx0Y3R4LnN0cm9rZSgpO1xuXG5cdFx0Y3R4LmxpbmVDYXAgICAgID0gX2xpbmVDYXA7XG5cdFx0Y3R4LmxpbmVXaWR0aCAgID0gX2xpbmVXaWR0aDtcblx0XHRjdHguc3Ryb2tlU3R5bGUgPSBfc3Ryb2tlU3R5bGU7XG5cdH1cblxuXHRyZXR1cm4ge1xuXHRcdGhlaWdodDogZ3JpZEhlaWdodCxcblx0XHR3aWR0aDogZ3JpZFdpZHRoLFxuXHRcdHBpeGVsSGVpZ2h0LFxuXHRcdHBpeGVsV2lkdGgsXG5cdFx0Y2xlYXIsXG5cdFx0ZmlsbCxcblx0XHRicmlkZ2UsXG5cdFx0bGluZSxcblx0XHR0b1BpeGVscyxcblx0XHR0b1NxdWFyZXNcblx0fTtcblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBHcmlkO1xuIiwidmFyIEdyaWQgPSByZXF1aXJlKCcuL2dyaWQnKTtcbnZhciByYW5kb20gPSByZXF1aXJlKCcuL3JhbmRvbScpO1xuXG52YXIgTWF6ZSA9IGZ1bmN0aW9uICh3aWR0aCwgaGVpZ2h0KSB7XG5cblx0dmFyIERJUkVDVElPTlMgPSBbJ25vcnRoJywgJ3NvdXRoJywgJ2Vhc3QnLCAnd2VzdCddO1xuXHR2YXIgR1JFRU4gPSAnIzRlY2RjNCcsIFJFRCA9ICcjZmY2YjZiJztcblxuXHR2YXIgcGF0aCA9IFtdO1xuXHR2YXIgbWF6ZSwgZ3JpZDtcblxuXHRmdW5jdGlvbiByYW5kb21JbnQobWF4KSB7XG5cdFx0cmV0dXJuIE1hdGguZmxvb3IocmFuZG9tKCkgKiBtYXgpO1xuXHR9XG5cblx0ZnVuY3Rpb24gcmFuZG9tRWxlbWVudChhcnIpIHtcblx0XHRyZXR1cm4gYXJyW3JhbmRvbUludChhcnIubGVuZ3RoKV07XG5cdH1cblxuXHRmdW5jdGlvbiBsYXN0RWxlbWVudChhcnIpIHtcblx0XHRyZXR1cm4gYXJyW2Fyci5sZW5ndGggLSAxXTtcblx0fVxuXG5cdC8qKlxuXHQgKiBHZXRzIHRoZSBjb29yZGluYXRlcyBvZiBhbiBhZGphY2VudCBzcXVhcmUuXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBzdGFydCBTdGFydGluZyBzcXVhcmUncyBjb29yZGluYXRlcy5cblx0ICogQHBhcmFtIHtzdHJpbmd9IGRpcmVjdGlvbiBDYXJkaW5hbCBkaXJlY3Rpb24gb2YgYWRqYWNlbnQgc3F1YXJlLlxuXHQgKiBAcmV0dXJucyB7b2JqZWN0fSBBZGphY2VudCBzcXVhcmUncyBjb29yZGluYXRlcy5cblx0ICovXG5cdGZ1bmN0aW9uIGFkamFjZW50U3F1YXJlKHN0YXJ0LCBkaXJlY3Rpb24pIHtcblx0XHRzd2l0Y2ggKGRpcmVjdGlvbikge1xuXHRcdFx0Y2FzZSAnbm9ydGgnOlxuXHRcdFx0XHRyZXR1cm4gc3RhcnQueSA+IDBcblx0XHRcdFx0XHQ/IHsgeDogc3RhcnQueCwgeTogc3RhcnQueSAtIDEgfVxuXHRcdFx0XHRcdDogbnVsbDtcblx0XHRcdGNhc2UgJ3NvdXRoJzpcblx0XHRcdFx0cmV0dXJuIHN0YXJ0LnkgPCBoZWlnaHQgLSAxXG5cdFx0XHRcdFx0PyB7IHg6IHN0YXJ0LngsIHk6IHN0YXJ0LnkgKyAxIH1cblx0XHRcdFx0XHQ6IG51bGw7XG5cdFx0XHRjYXNlICdlYXN0Jzpcblx0XHRcdFx0cmV0dXJuIHN0YXJ0LnggPCB3aWR0aCAtIDFcblx0XHRcdFx0XHQ/IHsgeDogc3RhcnQueCArIDEsIHk6IHN0YXJ0LnkgfVxuXHRcdFx0XHRcdDogbnVsbDtcblx0XHRcdGNhc2UgJ3dlc3QnOlxuXHRcdFx0XHRyZXR1cm4gc3RhcnQueCA+IDBcblx0XHRcdFx0XHQ/IHsgeDogc3RhcnQueCAtIDEsIHk6IHN0YXJ0LnkgfVxuXHRcdFx0XHRcdDogbnVsbDtcblx0XHRcdGRlZmF1bHQ6IHRocm93IG5ldyBFeGNlcHRpb24oJ0ludmFsaWQgZGlyZWN0aW9uICcgKyBkaXIpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBHZXRzIHRoZSBjb29yZGluYXRlcyBvZiBhbGwgc3F1YXJlcyBhZGphY2VudCB0byBhIGdpdmVuIHNxdWFyZS5cblx0ICogQHBhcmFtIHtvYmplY3R9IHN0YXJ0IENvb3JkaW5hdGVzIG9mIHRoZSBzdGFydGluZyBzcXVhcmUuXG5cdCAqIEByZXR1cm5zIHtvYmplY3R9IENvb3JkaW5hdGVzIG9mIGFkamFjZW50IHNxdWFyZXMgaW4gZWFjaCBkaXJlY3Rpb24uXG5cdCAqL1xuXHRmdW5jdGlvbiBhZGphY2VudFNxdWFyZXMoc3RhcnQpIHtcblx0XHRyZXR1cm4gRElSRUNUSU9OUy5yZWR1Y2UoKG9iaiwgZGlyKSA9PiB7XG5cdFx0XHRvYmpbZGlyXSA9IGFkamFjZW50U3F1YXJlKHN0YXJ0LCBkaXIpO1xuXHRcdFx0cmV0dXJuIG9iajtcblx0XHR9LCB7fSk7XG5cdH1cblxuXHQvKipcblx0ICogR2V0cyB0aGUgcmVsYXRpdmUgZGlyZWN0aW9uIGJldHdlZW4gdHdvIGFkamFjZW50IHNxdWFyZXMuXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBzdGFydCBUaGUgc3RhcnRpbmcgc3F1YXJlLlxuXHQgKiBAcGFyYW0ge29iamVjdH0gZW5kIFRoZSBlbmRpbmcgc3F1YXJlLlxuXHQgKiBAcmV0dXJucyB7c3RyaWdufSBDYXJkaW5hbCBkaXJlY3Rpb24gZnJvbSBzdGFydCB0byBlbmQuXG5cdCAqL1xuXHRmdW5jdGlvbiByZWxhdGl2ZURpcmVjdGlvbihzdGFydCwgZW5kKSB7XG5cdFx0aWYgKE1hdGguYWJzKGVuZC54IC0gc3RhcnQueCkgKyBNYXRoLmFicyhlbmQueSAtIHN0YXJ0LnkpID4gMSkge1xuXHRcdFx0Ly8gU3F1YXJlcyBhcmUgbm90IGFkamFjZW50XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cblx0XHRpZiAoc3RhcnQueCA8IGVuZC54KSB7XG5cdFx0XHRyZXR1cm4gJ2Vhc3QnO1xuXHRcdH0gZWxzZSBpZiAoZW5kLnggPCBzdGFydC54KSB7XG5cdFx0XHRyZXR1cm4gJ3dlc3QnO1xuXHRcdH0gZWxzZSBpZiAoc3RhcnQueSA8IGVuZC55KSB7XG5cdFx0XHRyZXR1cm4gJ3NvdXRoJztcblx0XHR9IGVsc2UgaWYgKGVuZC55IDwgc3RhcnQueSkge1xuXHRcdFx0cmV0dXJuICdub3J0aCc7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gZ2VuZXJhdGUoKSB7XG5cdFx0dmFyIG1lc2ggPSBbXTtcblx0XHR2YXIgZWRnZXMgPSBbXTtcblx0XHR2YXIgbGVuZ3RoID0gMDtcblx0XHR2YXIgeCwgeTtcblx0XHR2YXIgc3RhcnQsIGVuZDtcblxuXHRcdGZ1bmN0aW9uIGdldFNxdWFyZShzcXVhcmUpIHtcblx0XHRcdHJldHVybiBtZXNoW3NxdWFyZS54XVtzcXVhcmUueV07XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gaXNvbGF0ZWQoc3F1YXJlKSB7XG5cdFx0XHRzcXVhcmUgPSBnZXRTcXVhcmUoc3F1YXJlKTtcblx0XHRcdHJldHVybiBESVJFQ1RJT05TLmV2ZXJ5KGRpciA9PiBzcXVhcmVbZGlyXSAhPT0gdHJ1ZSk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gY29ubmVjdChhLCBiKSB7XG5cdFx0XHQvL2NvbnNvbGUubG9nKFsnQ09OTkVDVElORyAoJyxhLngsJywnLGEueSwnKSBhbmQgKCcsYi54LCcsJyxiLnksJykuJ10uam9pbignJykpO1xuXHRcdFx0bWVzaFthLnhdW2EueV1bcmVsYXRpdmVEaXJlY3Rpb24oYSwgYildID0gdHJ1ZTtcblx0XHRcdG1lc2hbYi54XVtiLnldW3JlbGF0aXZlRGlyZWN0aW9uKGIsIGEpXSA9IHRydWU7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gb3BlbkVkZ2Uoc3F1YXJlKSB7XG5cdFx0XHR2YXIge3gsIHl9ID0gc3F1YXJlO1xuXHRcdFx0aWYgKHggPT09IDApIHtcblx0XHRcdFx0bWVzaFt4XVt5XS53ZXN0ID0gdHJ1ZTtcblx0XHRcdH0gZWxzZSBpZiAoeSA9PT0gMCkge1xuXHRcdFx0XHRtZXNoW3hdW3ldLm5vcnRoID0gdHJ1ZTtcblx0XHRcdH0gZWxzZSBpZiAoeCA9PT0gKHdpZHRoIC0gMSkpIHtcblx0XHRcdFx0bWVzaFt4XVt5XS5lYXN0ID0gdHJ1ZTtcblx0XHRcdH0gZWxzZSBpZiAoeSA9PT0gKGhlaWdodCAtIDEpKSB7XG5cdFx0XHRcdG1lc2hbeF1beV0uc291dGggPSB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdEZXN0aW5hdGlvbiBub3Qgb24gZWRnZS4nKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRmdW5jdGlvbiBzZWFyY2gocG9zKSB7XG5cdFx0XHR2YXIgYWRqYWNlbmNpZXMsIG9wdGlvbnMsIGhlYWRpbmcsIG5leHQ7XG5cblx0XHRcdGlmIChwb3MueCA9PT0gZW5kLnggJiYgcG9zLnkgPT09IGVuZC55KSB7XG5cdFx0XHRcdG9wZW5FZGdlKHBvcyk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdMRU5HVEgnLCBsZW5ndGgpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGFkamFjZW5jaWVzID0gYWRqYWNlbnRTcXVhcmVzKHBvcyk7XG5cblx0XHRcdHdoaWxlICgxKSB7XG5cdFx0XHRcdG9wdGlvbnMgPSBPYmplY3Qua2V5cyhhZGphY2VuY2llcylcblx0XHRcdFx0XHQuZmlsdGVyKGRpciA9PiBhZGphY2VuY2llc1tkaXJdKVxuXHRcdFx0XHRcdC5maWx0ZXIoZGlyID0+IGlzb2xhdGVkKGFkamFjZW50U3F1YXJlKHBvcywgZGlyKSkpO1xuXHRcdFx0XHRpZiAoIW9wdGlvbnMubGVuZ3RoKSBicmVhaztcblxuXHRcdFx0XHRoZWFkaW5nID0gcmFuZG9tRWxlbWVudChvcHRpb25zKTtcblx0XHRcdFx0bmV4dCA9IGFkamFjZW5jaWVzW2hlYWRpbmddO1xuXHRcdFx0XHRjb25uZWN0KHBvcywgbmV4dCk7XG5cdFx0XHRcdGxlbmd0aCsrO1xuXHRcdFx0XHRzZWFyY2gobmV4dCk7XG5cdFx0XHRcdGxlbmd0aC0tO1xuXHRcdFx0fVxuXG5cdFx0fVxuXG5cdFx0Zm9yICh4ID0gMDsgeCA8IHdpZHRoOyB4KyspIHtcblx0XHRcdG1lc2hbeF0gPSBbXTtcblx0XHRcdGZvciAoeSA9IDA7IHkgPCBoZWlnaHQ7IHkrKykge1xuXHRcdFx0XHRpZiAoeCA9PT0gMCB8fFxuXHRcdFx0XHRcdHkgPT09IDAgfHxcblx0XHRcdFx0XHR4ID09PSAod2lkdGggLSAxKSB8fFxuXHRcdFx0XHRcdHkgPT09IChoZWlnaHQgLSAxKVxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHRlZGdlcy5wdXNoKHt4LCB5fSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRtZXNoW3hdW3ldID0ge1xuXHRcdFx0XHRcdG5vcnRoOiAwIDwgeSA/IGZhbHNlIDogbnVsbCxcblx0XHRcdFx0XHRzb3V0aDogeSA8IChoZWlnaHQgLSAxKSA/IGZhbHNlIDogbnVsbCxcblx0XHRcdFx0XHR3ZXN0OiAwIDwgeCA/IGZhbHNlIDogbnVsbCxcblx0XHRcdFx0XHRlYXN0OiB4IDwgKHdpZHRoIC0gMSkgPyBmYWxzZSA6IG51bGxcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRzdGFydCA9IHJhbmRvbUVsZW1lbnQoZWRnZXMpO1xuXHRcdHBhdGgucHVzaChzdGFydCk7XG5cdFx0ZG8ge1xuXHRcdFx0ZW5kID0gcmFuZG9tRWxlbWVudChlZGdlcyk7XG5cdFx0fSB3aGlsZSAoc3RhcnQueCA9PT0gZW5kLnggfHwgc3RhcnQueSA9PT0gZW5kLnkpO1xuXG5cdFx0b3BlbkVkZ2Uoc3RhcnQpO1xuXHRcdHNlYXJjaChzdGFydCk7XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0bWVzaCxcblx0XHRcdHN0YXJ0LFxuXHRcdFx0ZW5kXG5cdFx0fTtcblx0fVxuXG5cdGZ1bmN0aW9uIGJyaWRnZUVkZ2Uoc3F1YXJlLCBjb2xvcikge1xuXHRcdGlmIChzcXVhcmUueCA9PT0gMCkgeyAvLyBXZXN0XG5cdFx0XHRncmlkLmJyaWRnZShzcXVhcmUueCAtIDEsIHNxdWFyZS55LCBzcXVhcmUueCwgc3F1YXJlLnksIGNvbG9yKTtcblx0XHR9IGVsc2UgaWYgKHNxdWFyZS55ID09PSAwKSB7IC8vIE5vcnRoXG5cdFx0XHRncmlkLmJyaWRnZShzcXVhcmUueCwgc3F1YXJlLnkgLSAxLCBzcXVhcmUueCwgc3F1YXJlLnksIGNvbG9yKTtcblx0XHR9IGVsc2UgaWYgKHNxdWFyZS54ID09PSAod2lkdGggLSAxKSkgeyAvLyBFYXN0XG5cdFx0XHRncmlkLmJyaWRnZShzcXVhcmUueCwgc3F1YXJlLnksIHNxdWFyZS54ICsgMSwgc3F1YXJlLnksIGNvbG9yKTtcblx0XHR9IGVsc2UgaWYgKHNxdWFyZS55ID09PSAoaGVpZ2h0IC0gMSkpIHsgLy8gU291dGhcblx0XHRcdGdyaWQuYnJpZGdlKHNxdWFyZS54LCBzcXVhcmUueSwgc3F1YXJlLngsIHNxdWFyZS55ICsgMSwgY29sb3IpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ1NxdWFyZSBpcyBub3Qgb24gZWRnZS4nKTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiByZW5kZXIoJGVsKSB7XG5cdFx0dmFyIHgsIHk7XG5cblx0XHRncmlkID0gbmV3IEdyaWQoJGVsKTtcblx0XHRncmlkLmNsZWFyKCk7XG5cdFx0Z3JpZC53aWR0aCh3aWR0aCk7XG5cdFx0Z3JpZC5oZWlnaHQoaGVpZ2h0KTtcblxuXHRcdGZvciAoeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7XG5cdFx0XHRmb3IgKHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHtcblx0XHRcdFx0aWYgKCFtYXplLm1lc2hbeF1beV0ud2VzdCkge1xuXHRcdFx0XHRcdGdyaWQubGluZSh4LCB5LCB4LCB5ICsgMSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCFtYXplLm1lc2hbeF1beV0ubm9ydGgpIHtcblx0XHRcdFx0XHRncmlkLmxpbmUoeCwgeSwgeCArIDEsIHkpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gT25seSBuZWVkIHRvIGRyYXcgc291dGggYW5kIGVhc3Qgb24gZWRnZXNcblx0XHRcdFx0aWYgKHggPT09IHdpZHRoIC0gMSAmJiAhbWF6ZS5tZXNoW3hdW3ldLmVhc3QpIHtcblx0XHRcdFx0XHRncmlkLmxpbmUoeCArIDEsIHksIHggKyAxLCB5ICsgMSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHkgPT09IGhlaWdodCAtIDEgJiYgIW1hemUubWVzaFt4XVt5XS5zb3V0aCkge1xuXHRcdFx0XHRcdGdyaWQubGluZSh4LCB5ICsgMSwgeCArIDEsIHkgKyAxKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGdyaWQuZmlsbChtYXplLnN0YXJ0LngsIG1hemUuc3RhcnQueSwgR1JFRU4pO1xuXHRcdGdyaWQuZmlsbChtYXplLmVuZC54LCBtYXplLmVuZC55LCBSRUQpO1xuXHRcdGJyaWRnZUVkZ2UobWF6ZS5zdGFydCwgR1JFRU4pO1xuXHRcdGJyaWRnZUVkZ2UobWF6ZS5lbmQsIFJFRCk7XG5cdH1cblxuXHRmdW5jdGlvbiBtb3ZlKGRpcikge1xuXHRcdHZhciBwb3MgPSBsYXN0RWxlbWVudChwYXRoKTtcblx0XHR2YXIgcHJldmlvdXMgPSBwYXRoW3BhdGgubGVuZ3RoIC0gMl07XG5cdFx0dmFyIG5leHQ7XG5cblx0XHQvLyBEb24ndCBicmVhayBkb3duIHdhbGxzXG5cdFx0aWYgKCFtYXplLm1lc2hbcG9zLnhdW3Bvcy55XVtkaXJdKSByZXR1cm4gZmFsc2U7XG5cblx0XHRuZXh0ID0gYWRqYWNlbnRTcXVhcmUocG9zLCBkaXIpO1xuXHRcdGlmICghbmV4dCkgcmV0dXJuIGZhbHNlO1xuXG5cdFx0aWYgKHByZXZpb3VzICYmIG5leHQueCA9PT0gcHJldmlvdXMueCAmJiBuZXh0LnkgPT09IHByZXZpb3VzLnkpIHtcblx0XHRcdGdyaWQuYnJpZGdlKHBvcy54LCBwb3MueSwgbmV4dC54LCBuZXh0LnksIFJFRCk7XG5cdFx0XHRncmlkLmZpbGwocG9zLngsIHBvcy55LCBSRUQpO1xuXHRcdFx0cGF0aC5wb3AoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Z3JpZC5icmlkZ2UocG9zLngsIHBvcy55LCBuZXh0LngsIG5leHQueSwgR1JFRU4pO1xuXHRcdFx0Z3JpZC5maWxsKG5leHQueCwgbmV4dC55LCBHUkVFTik7XG5cdFx0XHRwYXRoLnB1c2gobmV4dCk7XG5cdFx0fVxuXG5cdFx0aWYgKG5leHQueCA9PT0gbWF6ZS5lbmQueCAmJiBuZXh0LnkgPT09IG1hemUuZW5kLnkpIHtcblx0XHRcdGJyaWRnZUVkZ2UobmV4dCwgR1JFRU4pO1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGZ1bmN0aW9uIGVudGVyU3F1YXJlKHNxdWFyZSkge1xuXHRcdHZhciBwb3MgPSBsYXN0RWxlbWVudChwYXRoKTtcblx0XHR2YXIgZGlyID0gcmVsYXRpdmVEaXJlY3Rpb24ocG9zLCBzcXVhcmUpO1xuXHRcdGlmIChkaXIpIG1vdmUoZGlyKTtcblx0fVxuXG5cdHZhciBob3ZlciA9IChmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIF94LCBfeTtcblxuXHRcdHJldHVybiBmdW5jdGlvbiAoeCwgeSkge1xuXHRcdFx0eCA9IGdyaWQudG9TcXVhcmVzKHgpO1xuXHRcdFx0eSA9IGdyaWQudG9TcXVhcmVzKHkpO1xuXHRcdFx0aWYgKHggIT09IG51bGwgJiYgeSAhPT0gbnVsbCAmJiAoeCAhPT0gX3ggfHwgeSAhPT0gX3kpKSB7XG5cdFx0XHRcdF94ID0geDtcblx0XHRcdFx0X3kgPSB5O1xuXHRcdFx0XHRlbnRlclNxdWFyZSh7eCwgeX0pO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0fSkoKTtcblxuXHRtYXplID0gZ2VuZXJhdGUoKTtcblxuXHRyZXR1cm4ge1xuXHRcdHJlbmRlcixcblx0XHRtb3ZlLFxuXHRcdGhvdmVyXG5cdH07XG5cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBNYXplO1xuIiwiZnVuY3Rpb24gcmFuZG9tKCkge1xuXHR2YXIgeCA9IE1hdGguc2luKHJhbmRvbS5zZWVkKyspICogMTAwMDA7XG5cdHJldHVybiB4IC0gTWF0aC5mbG9vcih4KTtcbn1cblxucmFuZG9tLnNlZWQgPSBNYXRoLnJhbmRvbSgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJhbmRvbTtcbiJdfQ==